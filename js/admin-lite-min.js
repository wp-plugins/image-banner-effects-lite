/*!
 * jQuery Transit - CSS3 transitions and transformations
 * (c) 2011-2012 Rico Sta. Cruz <rico@ricostacruz.com>
 * MIT Licensed.
 *
 * http://ricostacruz.com/jquery.transit
 * http://github.com/rstacruz/jquery.transit
 */
(function(x){x.transit={version:"0.9.9",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:true,useTransitionEnd:false};var E=document.createElement("div");var r={};function G(a){if(a in E.style){return a}var b=["Moz","Webkit","O","ms"];var e=a.charAt(0).toUpperCase()+a.substr(1);if(a in E.style){return a}for(var c=0;c<b.length;++c){var d=b[c]+e;if(d in E.style){return d}}}function D(){E.style[r.transform]="";E.style[r.transform]="rotateY(90deg)";return E.style[r.transform]!==""}var H=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;r.transition=G("transition");r.transitionDelay=G("transitionDelay");r.transform=G("transform");r.transformOrigin=G("transformOrigin");r.transform3d=D();var z={transition:"transitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"};var C=r.transitionEnd=z[r.transition]||null;for(var s in r){if(r.hasOwnProperty(s)&&typeof x.support[s]==="undefined"){x.support[s]=r[s]}}E=null;x.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(.6,.04,.98,.335)",linear:"cubic-bezier(1,1,1,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"};x.cssHooks["transit:transform"]={get:function(a){return x(a).data("transform")||new y()},set:function(b,c){var a=c;if(!(a instanceof y)){a=new y(a)}if(r.transform==="WebkitTransform"&&!H){b.style[r.transform]=a.toString(true)}else{b.style[r.transform]=a.toString()}x(b).data("transform",a)}};x.cssHooks.transform={set:x.cssHooks["transit:transform"].set};if(x.fn.jquery<"1.8"){x.cssHooks.transformOrigin={get:function(a){return a.style[r.transformOrigin]},set:function(b,a){b.style[r.transformOrigin]=a}};x.cssHooks.transition={get:function(a){return a.style[r.transition]},set:function(b,a){b.style[r.transition]=a}}}u("scale");u("translate");u("rotate");u("rotateX");u("rotateY");u("rotate3d");u("perspective");u("skewX");u("skewY");u("x",true);u("y",true);function y(a){if(typeof a==="string"){this.parse(a)}return this}y.prototype={setFromString:function(a,b){var c=(typeof b==="string")?b.split(","):(b.constructor===Array)?b:[b];c.unshift(a);y.prototype.set.apply(this,c)},set:function(a){var b=Array.prototype.slice.apply(arguments,[1]);if(this.setter[a]){this.setter[a].apply(this,b)}else{this[a]=b.join(",")}},get:function(a){if(this.getter[a]){return this.getter[a].apply(this)}else{return this[a]||0}},setter:{rotate:function(a){this.rotate=t(a,"deg")},rotateX:function(a){this.rotateX=t(a,"deg")},rotateY:function(a){this.rotateY=t(a,"deg")},scale:function(b,a){if(a===undefined){a=b}this.scale=b+","+a},skewX:function(a){this.skewX=t(a,"deg")},skewY:function(a){this.skewY=t(a,"deg")},perspective:function(a){this.perspective=t(a,"px")},x:function(a){this.set("translate",a,null)},y:function(a){this.set("translate",null,a)},translate:function(b,a){if(this._translateX===undefined){this._translateX=0}if(this._translateY===undefined){this._translateY=0}if(b!==null&&b!==undefined){this._translateX=t(b,"px")}if(a!==null&&a!==undefined){this._translateY=t(a,"px")}this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var a=(this.scale||"1,1").split(",");if(a[0]){a[0]=parseFloat(a[0])}if(a[1]){a[1]=parseFloat(a[1])}return(a[0]===a[1])?a[0]:a},rotate3d:function(){var a=(this.rotate3d||"0,0,0,0deg").split(",");for(var b=0;b<=3;++b){if(a[b]){a[b]=parseFloat(a[b])}}if(a[3]){a[3]=t(a[3],"deg")}return a}},parse:function(a){var b=this;a.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(e,c,d){b.setFromString(c,d)})},toString:function(a){var b=[];for(var c in this){if(this.hasOwnProperty(c)){if((!r.transform3d)&&((c==="rotateX")||(c==="rotateY")||(c==="perspective")||(c==="transformOrigin"))){continue}if(c[0]!=="_"){if(a&&(c==="scale")){b.push(c+"3d("+this[c]+",1)")}else{if(a&&(c==="translate")){b.push(c+"3d("+this[c]+",0)")}else{b.push(c+"("+this[c]+")")}}}}}return b.join(" ")}};function v(b,c,a){if(c===true){b.queue(a)}else{if(c){b.queue(c,a)}else{a()}}}function A(a){var b=[];x.each(a,function(c){c=x.camelCase(c);c=x.transit.propertyMap[c]||x.cssProps[c]||c;c=F(c);if(x.inArray(c,b)===-1){b.push(c)}});return b}function B(f,c,a,g){var e=A(f);if(x.cssEase[a]){a=x.cssEase[a]}var b=""+w(c)+" "+a;if(parseInt(g,10)>0){b+=" "+w(g)}var d=[];x.each(e,function(h,i){d.push(i+" "+b)});return d.join(", ")}x.fn.transition=x.fn.transit=function(f,n,g,c){var b=this;var k=0;var i=true;if(typeof n==="function"){c=n;n=undefined}if(typeof g==="function"){c=g;g=undefined}if(typeof f.easing!=="undefined"){g=f.easing;delete f.easing}if(typeof f.duration!=="undefined"){n=f.duration;delete f.duration}if(typeof f.complete!=="undefined"){c=f.complete;delete f.complete}if(typeof f.queue!=="undefined"){i=f.queue;delete f.queue}if(typeof f.delay!=="undefined"){k=f.delay;delete f.delay}if(typeof n==="undefined"){n=x.fx.speeds._default}if(typeof g==="undefined"){g=x.cssEase._default}n=w(n);var m=B(f,n,g,k);var d=x.transit.enabled&&r.transition;var l=d?(parseInt(n,10)+parseInt(k,10)):0;if(l===0){var e=function(o){b.css(f);if(c){c.apply(b)}if(o){o()}};v(b,i,e);return b}var h={};var a=function(o){var p=false;var q=function(){if(p){b.unbind(C,q)}if(l>0){b.each(function(){this.style[r.transition]=(h[this]||null)})}if(typeof c==="function"){c.apply(b)}if(typeof o==="function"){o()}};if((l>0)&&(C)&&(x.transit.useTransitionEnd)){p=true;b.bind(C,q)}else{window.setTimeout(q,l)}b.each(function(){if(l>0){this.style[r.transition]=m}x(this).css(f)})};var j=function(o){this.offsetWidth;a(o)};v(b,i,j);return this};function u(a,b){if(!b){x.cssNumber[a]=true}x.transit.propertyMap[a]=r.transform;x.cssHooks[a]={get:function(c){var d=x(c).css("transit:transform");return d.get(a)},set:function(d,c){var e=x(d).css("transit:transform");e.setFromString(a,c);x(d).css({"transit:transform":e})}}}function F(a){return a.replace(/([A-Z])/g,function(b){return"-"+b.toLowerCase()})}function t(a,b){if((typeof a==="string")&&(!a.match(/^[\-0-9\.]+$/))){return a}else{return""+a+b}}function w(a){var b=a;if(x.fx.speeds[b]){b=x.fx.speeds[b]}return t(b,"ms")}x.transit.getTransitionValue=B})(jQuery);
/*!
 * imagesLoaded PACKAGED v3.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
(function(){function d(){}function b(i,h){for(var j=i.length;j--;){if(i[j].listener===h){return j}}return -1}function g(h){return function(){return this[h].apply(this,arguments)}}var a=d.prototype,c=this,f=c.EventEmitter;a.getListeners=function(k){var j,l,h=this._getEvents();if("object"==typeof k){j={};for(l in h){h.hasOwnProperty(l)&&k.test(l)&&(j[l]=h[l])}}else{j=h[k]||(h[k]=[])}return j},a.flattenListeners=function(i){var h,j=[];for(h=0;i.length>h;h+=1){j.push(i[h].listener)}return j},a.getListenersAsObject=function(i){var h,j=this.getListeners(i);return j instanceof Array&&(h={},h[i]=j),h||j},a.addListener=function(k,m){var h,j=this.getListenersAsObject(k),l="object"==typeof m;for(h in j){j.hasOwnProperty(h)&&-1===b(j[h],m)&&j[h].push(l?m:{listener:m,once:!1})}return this},a.on=g("addListener"),a.addOnceListener=function(i,h){return this.addListener(i,{listener:h,once:!0})},a.once=g("addOnceListener"),a.defineEvent=function(h){return this.getListeners(h),this},a.defineEvents=function(i){for(var h=0;i.length>h;h+=1){this.defineEvent(i[h])}return this},a.removeListener=function(k,m){var h,j,l=this.getListenersAsObject(k);for(j in l){l.hasOwnProperty(j)&&(h=b(l[j],m),-1!==h&&l[j].splice(h,1))}return this},a.off=g("removeListener"),a.addListeners=function(i,h){return this.manipulateListeners(!1,i,h)},a.removeListeners=function(i,h){return this.manipulateListeners(!0,i,h)},a.manipulateListeners=function(m,j,q){var h,l,p=m?this.removeListener:this.addListener,k=m?this.removeListeners:this.addListeners;if("object"!=typeof j||j instanceof RegExp){for(h=q.length;h--;){p.call(this,j,q[h])}}else{for(h in j){j.hasOwnProperty(h)&&(l=j[h])&&("function"==typeof l?p.call(this,h,l):k.call(this,h,l))}}return this},a.removeEvent=function(k){var j,l=typeof k,h=this._getEvents();if("string"===l){delete h[k]}else{if("object"===l){for(j in h){h.hasOwnProperty(j)&&k.test(j)&&delete h[j]}}else{delete this._events}}return this},a.removeAllListeners=g("removeEvent"),a.emitEvent=function(m,j){var q,h,l,p,k=this.getListenersAsObject(m);for(l in k){if(k.hasOwnProperty(l)){for(h=k[l].length;h--;){q=k[l][h],q.once===!0&&this.removeListener(m,q.listener),p=q.listener.apply(this,j||[]),p===this._getOnceReturnValue()&&this.removeListener(m,q.listener)}}}return this},a.trigger=g("emitEvent"),a.emit=function(i){var h=Array.prototype.slice.call(arguments,1);return this.emitEvent(i,h)},a.setOnceReturnValue=function(h){return this._onceReturnValue=h,this},a._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},a._getEvents=function(){return this._events||(this._events={})},d.noConflict=function(){return c.EventEmitter=f,d},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return d}):"object"==typeof module&&module.exports?module.exports=d:this.EventEmitter=d}).call(this),function(d){function b(e){var h=d.event;return h.target=h.target||h.srcElement||e,h}var g=document.documentElement,a=function(){};g.addEventListener?a=function(i,h,j){i.addEventListener(h,j,!1)}:g.attachEvent&&(a=function(j,k,h){j[k+h]=h.handleEvent?function(){var e=b(j);h.handleEvent.call(h,e)}:function(){var e=b(j);h.call(j,e)},j.attachEvent("on"+k,j[k+h])});var c=function(){};g.removeEventListener?c=function(i,h,j){i.removeEventListener(h,j,!1)}:g.detachEvent&&(c=function(k,j,l){k.detachEvent("on"+j,k[j+l]);try{delete k[j+l]}catch(h){k[j+l]=void 0}});var f={bind:a,unbind:c};"function"==typeof define&&define.amd?define("eventie/eventie",f):d.eventie=f}(this),function(b,a){"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(d,c){return a(b,d,c)}):"object"==typeof exports?module.exports=a(b,require("eventEmitter"),require("eventie")):b.imagesLoaded=a(b,b.EventEmitter,b.eventie)}(this,function(p,A,j){function k(c,a){for(var d in a){c[d]=a[d]}return c}function b(a){return"[object Array]"===q.call(a)}function g(d){var c=[];if(b(d)){c=d}else{if("number"==typeof d.length){for(var f=0,a=d.length;a>f;f++){c.push(d[f])}}else{c.push(d)}}return c}function B(d,a,f){if(!(this instanceof B)){return new B(d,a)}"string"==typeof d&&(d=document.querySelectorAll(d)),this.elements=g(d),this.options=k({},this.options),"function"==typeof a?f=a:k(this.options,a),f&&this.on("always",f),this.getImages(),x&&(this.jqDeferred=new x.Deferred);var c=this;setTimeout(function(){c.check()})}function w(a){this.img=a}function m(a){this.src=a,y[a]=this}var x=p.jQuery,z=p.console,l=z!==void 0,q=Object.prototype.toString;B.prototype=new A,B.prototype.options={},B.prototype.getImages=function(){this.images=[];for(var h=0,c=this.elements.length;c>h;h++){var v=this.elements[h];"IMG"===v.nodeName&&this.addImage(v);for(var a=v.querySelectorAll("img"),f=0,u=a.length;u>f;f++){var d=a[f];this.addImage(d)}}},B.prototype.addImage=function(c){var a=new w(c);this.images.push(a)},B.prototype.check=function(){function f(n,i){return c.options.debug&&l&&z.log("confirm",n,i),c.progress(n),s++,s===a&&c.complete(),!0}var c=this,s=0,a=this.images.length;if(this.hasAnyBroken=!1,!a){return this.complete(),void 0}for(var d=0;a>d;d++){var h=this.images[d];h.on("confirm",f),h.check()}},B.prototype.progress=function(c){this.hasAnyBroken=this.hasAnyBroken||!c.isLoaded;var a=this;setTimeout(function(){a.emit("progress",a,c),a.jqDeferred&&a.jqDeferred.notify&&a.jqDeferred.notify(a,c)})},B.prototype.complete=function(){var c=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var a=this;setTimeout(function(){if(a.emit(c,a),a.emit("always",a),a.jqDeferred){var d=a.hasAnyBroken?"reject":"resolve";a.jqDeferred[d](a)}})},x&&(x.fn.imagesLoaded=function(c,a){var d=new B(this,c,a);return d.jqDeferred.promise(x(this))}),w.prototype=new A,w.prototype.check=function(){var c=y[this.img.src]||new m(this.img.src);if(c.isConfirmed){return this.confirm(c.isLoaded,"cached was confirmed"),void 0}if(this.img.complete&&void 0!==this.img.naturalWidth){return this.confirm(0!==this.img.naturalWidth,"naturalWidth"),void 0}var a=this;c.on("confirm",function(d,f){return a.confirm(d.isLoaded,f),!0}),c.check()},w.prototype.confirm=function(c,a){this.isLoaded=c,this.emit("confirm",this,a)};var y={};return m.prototype=new A,m.prototype.check=function(){if(!this.isChecked){var a=new Image;j.bind(a,"load",this),j.bind(a,"error",this),a.src=this.src,this.isChecked=!0}},m.prototype.handleEvent=function(c){var a="on"+c.type;this[a]&&this[a](c)},m.prototype.onload=function(a){this.confirm(!0,"onload"),this.unbindProxyEvents(a)},m.prototype.onerror=function(a){this.confirm(!1,"onerror"),this.unbindProxyEvents(a)},m.prototype.confirm=function(c,a){this.isConfirmed=!0,this.isLoaded=c,this.emit("confirm",this,a)},m.prototype.unbindProxyEvents=function(a){j.unbind(a.target,"load",this),j.unbind(a.target,"error",this)},B});var W3Ex=W3Ex||{};jQuery(document).ready(function(){W3Ex.ibaengine=(function(z){var O=[["rgb(0, 0, 0)","rgb(67, 67, 67)","rgb(102, 102, 102)","rgb(204, 204, 204)","rgb(217, 217, 217)","rgb(255, 255, 255)"],["rgb(152, 0, 0)","rgb(255, 0, 0)","rgb(255, 153, 0)","rgb(255, 255, 0)","rgb(0, 255, 0)","rgb(0, 255, 255)","rgb(74, 134, 232)","rgb(0, 0, 255)","rgb(153, 0, 255)","rgb(255, 0, 255)"],["rgb(230, 184, 175)","rgb(244, 204, 204)","rgb(252, 229, 205)","rgb(255, 242, 204)","rgb(217, 234, 211)","rgb(208, 224, 227)","rgb(201, 218, 248)","rgb(207, 226, 243)","rgb(217, 210, 233)","rgb(234, 209, 220)","rgb(221, 126, 107)","rgb(234, 153, 153)","rgb(249, 203, 156)","rgb(255, 229, 153)","rgb(182, 215, 168)","rgb(162, 196, 201)","rgb(164, 194, 244)","rgb(159, 197, 232)","rgb(180, 167, 214)","rgb(213, 166, 189)","rgb(204, 65, 37)","rgb(224, 102, 102)","rgb(246, 178, 107)","rgb(255, 217, 102)","rgb(147, 196, 125)","rgb(118, 165, 175)","rgb(109, 158, 235)","rgb(111, 168, 220)","rgb(142, 124, 195)","rgb(194, 123, 160)","rgb(166, 28, 0)","rgb(204, 0, 0)","rgb(230, 145, 56)","rgb(241, 194, 50)","rgb(106, 168, 79)","rgb(69, 129, 142)","rgb(60, 120, 216)","rgb(61, 133, 198)","rgb(103, 78, 167)","rgb(166, 77, 121)","rgb(91, 15, 0)","rgb(102, 0, 0)","rgb(120, 63, 4)","rgb(127, 96, 0)","rgb(39, 78, 19)","rgb(12, 52, 61)","rgb(28, 69, 135)","rgb(7, 55, 99)","rgb(32, 18, 77)","rgb(76, 17, 48)"]];var P=[];var I={};var k={};var j=[];var C=0;var g=0;var F;var N={type:"#onappeartype",easing:"#onappeareasing",speed:"#onappearspeed"};var L={type:"#ondisappeartype",easing:"#ondisappeareasing",speed:"#ondisappearspeed"};var x={newlayer:"#newlayer",newtext:"#newtextstate",newhtml:"#newhtmlstate",newimage:"#newimagestate",previewlayer:"#previewlayer",deletelayer:"#deletelayer"};var M={layer:0,state:0,style:0};var a={layer:-1,state:-1};var Q=[];var d;var A={};var b="";var i=40;var E=false;var h={};h.ispreview=false;h.counter=0;z("#aelementid").keyup(function(){z("#elementerror").html("")});z("#newplaceholder").click(function(){z("#placeholder").dialog("open")});z("input:radio[name=radiop]").click(function(){z("#elementerror").html("")});z("#Top-left").click(function(){z("#elementplacement").text("Top-left");z("#elementerror").html("")});z("#Top-middle").click(function(){z("#elementplacement").text("Top-middle");z("#elementerror").html("")});z("#Top-right").click(function(){z("#elementplacement").text("Top-right");z("#elementerror").html("")});z("#Mid-left").click(function(){z("#elementplacement").text("Mid-left");z("#elementerror").html("")});z("#Mid-middle").click(function(){z("#elementplacement").text("Center");z("#elementerror").html("")});z("#Mid-right").click(function(){z("#elementplacement").text("Mid-right");z("#elementerror").html("")});z("#Bot-left").click(function(){z("#elementplacement").text("Bot-left");z("#elementerror").html("")});z("#Bot-middle").click(function(){z("#elementplacement").text("Bot-middle");z("#elementerror").html("")});z("#Bot-right").click(function(){z("#elementplacement").text("Bot-right");z("#elementerror").html("")});z(document).on("click",".layersettings",function(){var S=z(this);W3Ex.currcontainer=true;W3Ex.clickedelem=S;z("#placeholder").dialog("open")});z("#applyoffset").click(function(){var S=z(this).prop("checked");if(S){z("#leftrightdiv").show();z("#topbottomdiv").show()}else{z("#leftrightdiv").hide();z("#topbottomdiv").hide()}});z("#placeholder").dialog({autoOpen:false,height:420,width:520,modal:true,draggable:false,resizable:false,closeOnEscape:false,open:function(U,V){var W=z(".ui-dialog:visible");z(W).css("z-index",300002);z(".ui-widget-overlay").each(function(){z(this).next(".ui-dialog").andSelf().wrapAll('<div class="w3exvtfscope w3exvtfdel" />')});z("span.ui-icon-closethick").css({left:"0px",top:"0px"});z("input:radio[name=radiop]").each(function(){z(this).prop("checked",false)});z("#elementplacement").text("");z("#aelementid").val("");z("#elementerror").html("");z("#placeholder").css("height","342px");z("#applyoffset").prop("checked",false);z("#leftrightdiv").hide();z("#topbottomdiv").hide();z("#leftrightper").val("0");z("#leftrightleft").prop("checked","checked");z("#topbottomper").val("0");z("#topbottomtop").prop("checked","checked");z("#p0").prop("checked","checked");if(W3Ex.currcontainer!=undefined&&W3Ex.currcontainer){var X=W3Ex.clickedelem.attr("data-id");for(var T=0;T<W3Ex.containers.length;T++){var S=W3Ex.containers[T];if(S==undefined){continue}if(S.id!=X){continue}if((S.standalone!==true)&&(S.standalone!==false)){if(S.standalone=="true"){S.standalone=true}else{S.standalone=false}}if(S.standalone){z("#p0").prop("checked","checked")}else{z("#p1").prop("checked","checked");z("#aelementid").val(S.elemid);z("#elementplacement").text(S.elemposition);if((S.ifoffset!==true)&&(S.ifoffset!==false)){if(S.ifoffset=="true"){S.ifoffset=true}else{S.ifoffset=false}}if(S.ifoffset){z("#applyoffset").prop("checked",true);z("#leftrightdiv").show();z("#topbottomdiv").show();z("#leftrightper").val(S.leftrightp);z("#"+S.leftrightd).prop("checked","checked");z("#topbottomper").val(S.topbottomp);z("#"+S.topbottomd).prop("checked","checked")}}}}},close:function(S,T){W3Ex.currcontainer=false},buttons:{OK:function(){var W=z("input[name=radiop]:checked").attr("id");var T=z("#aelementid").val();var Y=z("#elementplacement").text();if(W!=undefined){if(W!="p0"){if(y(T)){z("#elementerror").html('<div class="ui-widget"><div class="ui-state-error ui-corner-all" style="padding: 5px;">Enter element ID</div></div>');return}if(y(Y)){z("#elementerror").html('<div class="ui-widget"><div class="ui-state-error ui-corner-all" style="padding: 5px;">Select element position</div></div>');return}}}else{z("#elementerror").html('<div class="ui-widget"><div class="ui-state-error ui-corner-all" style="padding: 5px;">Select layer style</div></div>');return}var V=z(".ui-dialog-buttonset > .ui-button").first();V.addClass("disabled").css("position","relative").append('<div class="showajax"></div>');var aa={};if(W=="p0"){aa.standalone=true}else{aa.standalone=false;aa.elemid=T;aa.elemposition=Y;aa.ifoffset=z("#applyoffset").prop("checked");if(aa.ifoffset){aa.leftrightp=z("#leftrightper").val();var ac=z("input[name=leftright]:checked").attr("id");aa.leftrightd=ac;aa.topbottomp=z("#topbottomper").val();var ab=z("input[name=topbottom]:checked").attr("id");aa.topbottomd=ab}}if(W3Ex.currcontainer!=undefined&&W3Ex.currcontainer){var U=W3Ex.clickedelem.attr("data-id");aa.id=U;for(var Z=0;Z<W3Ex.containers.length;Z++){var S=W3Ex.containers[Z];if(S==undefined){continue}if(S.id!=U){continue}S.standalone=aa.standalone;if(!S.standalone){S.elemid=aa.elemid;S.elemposition=aa.elemposition;S.ifoffset=aa.ifoffset;if(S.ifoffset){S.leftrightp=aa.leftrightp;S.leftrightd=aa.leftrightd;S.topbottomp=aa.topbottomp;S.topbottomd=aa.topbottomd}}}var X={};X.action="ibeffects_ajax_request";X.type="updateelement";X.nonce=W3ExIBA.nonce;X.data=aa;var ae=z(this);var ad=W3Ex.clickedelem;jQuery.ajax({type:"post",dataType:"json",url:W3ExIBA.ajaxurl,data:X,success:function(af){V.removeClass("disabled").css("position","static");V.find(".showajax").remove();var ag="<br>type: placeholder";if(aa.standalone){ag+="<br>sub-type: standalone"}else{ag="type: placeholder";ag+="<br>sub-type: attached";ag+="<br>to element: "+aa.elemid;ag+="<br>position: "+aa.elemposition}ad.closest(".centerblock").find(".shownimages").html(ag);ae.dialog("close")}})}else{var X={};X.action="ibeffects_ajax_request";X.type="newelement";X.nonce=W3ExIBA.nonce;X.data=aa;var ae=z(this);jQuery.ajax({type:"post",dataType:"json",url:W3ExIBA.ajaxurl,data:X,success:function(af){V.removeClass("disabled").css("position","static");V.find(".showajax").remove();var ah="<br>type: placeholder";if(aa.standalone){ah+="<br>sub-type: standalone"}else{ah="type: placeholder";ah+="<br>sub-type: attached";ah+="<br>to element: "+aa.elemid;ah+="<br>position: "+aa.elemposition}var ag="<tr><td >"+af.id.id+"</td><td >"+af.id.shortcode+'</td><td ><div style="text-align:left;">'+af.id.infoto+'</div></td><td style="padding-top:2px;padding-bottom:6px;"><div class="centerblock"><div class="imagebuttons"><a class="btn btn-success btn-sm editlayer" href="admin.php?page=ibeffects&edit='+af.id.id+'"><span class="glyphicon glyphicon-pencil"></span>&nbsp;Edit</a><button data-id="'+af.id.id+'" class="btn btn-info btn-sm layersettings" style="margin-top:6px;margin-bottom:6px;"><span class="glyphicon glyphicon-cog"></span>&nbsp;Settings</button>	<button data-id="'+af.id.id+'" class="btn btn-danger btn-sm deletelayer"><span class="glyphicon glyphicon-trash"></span>&nbsp;Delete</button>	</div><div class="shownimages" style="text-align:left;padding-left:40px;">'+ah+'</div><div style="clear:both;"> </div></div></td></tr>';z("#showimages > tbody:last").append(ag);W3Ex.containers=W3Ex.containers||[];var ai={};ai.id=af.id.id;ai.standalone=aa.standalone;if(!ai.standalone){ai.elemid=aa.elemid;ai.elemposition=aa.elemposition;ai.ifoffset=aa.ifoffset;if(ai.ifoffset){ai.leftrightp=aa.leftrightp;ai.leftrightd=aa.leftrightd;ai.topbottomp=aa.topbottomp;ai.topbottomd=aa.topbottomd}}W3Ex.containers.push(ai);ae.dialog("close")}})}},Cancel:function(){z(this).dialog("close")}}});z(x.previewlayer).click(function(){if(a.layer==-1){return}var Y=z(this).text();if(Y.indexOf("Preview Layer")!=-1){z(this).html('<span class="glyphicon glyphicon-stop"></span> Exit Preview</button>');z(this).removeClass("btn-success").addClass("btn-warning");z("#maindiv").hide();z(x.newlayer).attr("disabled","disabled");z(x.deletelayer).attr("disabled","disabled");h.ispreview=true;var V={};V.id=a.layer;h.arrstates=r(a.layer);if(a.state==-1){if(h.arrstates.length>0){B(a.layer,h.arrstates[0].stateid,true)}}else{B(a.layer,a.state,true)}V.top=d.position().top;V.left=d.position().left;V.width=0;V.height=0;h.layer=V;if(E){d.hide()}for(var U=0;U<I.layers.items.length;U++){var V=I.layers.items[U];if(V==undefined){continue}var S=z('.layer[data-id="'+V.id+'"]');if(S.length){S.hide()}}c()}else{z(this).html('<span class="glyphicon glyphicon-play"></span> Preview Layer</button>');z(this).removeClass("btn-warning").addClass("btn-success");z("#maindiv").show();if(!E){z(x.deletelayer).removeAttr("disabled");z(x.newlayer).removeAttr("disabled")}h.ispreview=false;for(var T=0;T<P.length;T++){var X=P[T];X.domitem.dequeue();X.domitem.css({"transition-timing-function":"","transition-delay":"","transition-duration":"","transition-property":""})}var W=document.getElementById("w3_previewlayer");W.innerHTML="";P.splice(0,P.length);z("#w3_previewlayer").remove();if(E){d.show()}for(var U=0;U<I.layers.items.length;U++){var V=I.layers.items[U];if(V==undefined){continue}var S=z('.layer[data-id="'+V.id+'"]');if(S.length){S.show()}}}});function n(S){if(S=="layer"){if(E){z(x.deletelayer).attr("disabled","disabled");z(x.newlayer).attr("disabled","disabled")}if(a.layer==-1){z(x.newtext).attr("disabled","disabled");z(x.previewlayer).attr("disabled","disabled");z(x.deletelayer).attr("disabled","disabled")}else{z(x.newtext).removeAttr("disabled");var T=r(a.layer);if(T.length==0){z(x.previewlayer).attr("disabled","disabled")}else{z(x.previewlayer).removeAttr("disabled")}if(!E){z(x.deletelayer).removeAttr("disabled")}}}if(S=="state"){if(a.state==-1){z("#statesettings").tabs().hide()}else{z("#statesettings").tabs().show()}}}function r(V){var T=[];for(var S=0;S<I.states.items.length;S++){if(!t(I.states.items[S])){continue}var U=I.states.items[S];if(U.layerid!=V){continue}T.push(U)}return T}function y(S){return(!S||!/\S/.test(S))}z("#changestyle").click(function(){B(a.layer,a.state,false);z("#showdialog").dialog("open")});z("#updatestyle").click(function(){var X=z("#usestyles").val();if(X=="none"){return}var U;for(var T=0;T<k.items.length;T++){U=k.items[T];if(U==undefined){continue}if(U.id==X){U.fontsize=z("#slider-font-size").slider("value");U.fontcolor=z("#font-color-value").val();U.fontfamily=z("#font-family").val();if(z("#ifbackground").prop("checked")){U.ifbackground=true;U.backcolor=z("#back-color-value").val();U.radiussize=z("#slider-radius-size").slider("value");U.padding=z("#slider-padding-size").slider("value")}else{U.ifbackground=false}break}}var S=z(this);S.addClass("disabled").css("position","relative").append('<div class="showajax"></div>');var W={};W.action="ibeffects_ajax_request";W.type="savestyle";W.nonce=W3ExIBA.nonce;var V={};V.styles=k;W.data=V;jQuery.ajax({type:"post",dataType:"json",url:W3ExIBA.ajaxurl,data:W,complete:function(Y){S.removeClass("disabled").css("position","static");S.find(".showajax").remove()}})});z("#renamestyle").click(function(){var Y=z("#usestyles").val();var X=z("#renamestylename").val();if(y(X)){return}if(Y=="none"){return}var U;for(var T=0;T<k.items.length;T++){U=k.items[T];if(U==undefined){continue}if(U.id==Y){U.name=X;break}}var S=z(this);S.addClass("disabled").css("position","relative").append('<div class="showajax"></div>');var W={};W.action="ibeffects_ajax_request";W.type="savestyle";W.nonce=W3ExIBA.nonce;var V={};V.styles=k;W.data=V;jQuery.ajax({type:"post",dataType:"json",url:W3ExIBA.ajaxurl,data:W,complete:function(Z){S.removeClass("disabled").css("position","static");S.find(".showajax").remove();z("#usestyles option:selected").text(X);z("#renamestylename").val("")}})});z("#deletestyle").click(function(){var X=z("#usestyles").val();if(X=="none"){return}var U;for(var T=0;T<k.items.length;T++){U=k.items[T];if(U==undefined){continue}if(U.id==X){delete k.items[T];break}}var S=z(this);S.addClass("disabled").css("position","relative").append('<div class="showajax"></div>');var W={};W.action="ibeffects_ajax_request";W.type="savestyle";W.nonce=W3ExIBA.nonce;var V={};V.styles=k;W.data=V;jQuery.ajax({type:"post",dataType:"json",url:W3ExIBA.ajaxurl,data:W,complete:function(Y){S.removeClass("disabled").css("position","static");S.find(".showajax").remove();z("#usestyles option:selected").remove()}})});z("#newstyle").click(function(){var W=z("#newstylename").val();if(y(W)){W="untitled"}var T=z(this);T.addClass("disabled").css("position","relative").append('<div class="showajax"></div>');var S={};S.name=W;S.id=M.style;S.fontsize=z("#slider-font-size").slider("value");S.fontcolor=z("#font-color-value").val();S.fontfamily=z("#font-family").val();if(z("#ifbackground").prop("checked")){S.ifbackground=true;S.backcolor=z("#back-color-value").val();S.radiussize=z("#slider-radius-size").slider("value");S.padding=z("#slider-padding-size").slider("value")}else{S.ifbackground=false}M.style++;k.items.push(S);var V={};V.action="ibeffects_ajax_request";V.type="savestyle";V.nonce=W3ExIBA.nonce;var U={};U.styles=k;V.data=U;jQuery.ajax({type:"post",dataType:"json",url:W3ExIBA.ajaxurl,data:V,complete:function(X){T.removeClass("disabled").css("position","static");T.find(".showajax").remove();z("#usestyles").append("<option value='"+S.id+"'>"+S.name+"</option>");z("#usestyles").val(S.id);z("#updatestyle, #renamestyle, #deletestyle").removeAttr("disabled");z("#newstylename").val("")}})});z("#ifbackground").click(function(S){if(z("#ifbackground").prop("checked")){z("#divifbackground").css("visibility","visible");z("#fontexample").css("background",z("#back-color-value").val());z("#fontexample").css("border-radius",z("#slider-radius-size").slider("value"))}else{z("#divifbackground").css("visibility","hidden");z("#fontexample").css("background","");z("#fontexample").css("border-radius","")}});z("#usestyles").change(function(){var V=z(this).val();var U=z("#fontexample");if(V=="none"){z("#updatestyle, #renamestyle, #deletestyle").attr("disabled","disabled");z("#ifbackground").prop("checked",false);z("#divifbackground").css("visibility","hidden");U.css("background","");z("#slider-font-size").slider("value",15);z("#font-size").val("15px");z("#slider-padding-size").slider("value",0);z("#padding-size").val("0px");U.css("padding","0px");z("#font-color").spectrum("set","#000000");z("#font-color-value").val("#000000");U.css("color","#000000");U.css("font-size","15px");return}z("#updatestyle, #renamestyle, #deletestyle").removeAttr("disabled");var T;for(var S=0;S<k.items.length;S++){T=k.items[S];if(T==undefined){continue}if(T.id==undefined){continue}if(T.id==V){z("#slider-font-size").slider("value",T.fontsize);z("#font-size").val(T.fontsize+"px");z("#font-family").val(T.fontfamily);U.css("font-family",T.fontfamily);z("#font-color").spectrum("set",T.fontcolor);z("#font-color-value").val(T.fontcolor);U.css("color",T.fontcolor);U.css("font-size",T.fontsize+"px");if(T.ifbackground){if(T.ifbackground=="false"){T.ifbackground=false}if(T.backcolor==undefined){T.ifbackground=false}}if(T.ifbackground){z("#ifbackground").prop("checked",true);z("#divifbackground").css("visibility","visible");z("#back-color").spectrum("set",T.backcolor);z("#back-color-value").val(T.backcolor);z("#slider-radius-size").slider("value",T.radiussize);z("#radius-size").val(T.radiussize+"px");z("#slider-padding-size").slider("value",T.padding);z("#padding-size").val(T.padding+"px");U.css("padding",T.padding+"px");U.css("border-radius",T.radiussize+"px");U.css("background",T.backcolor)}else{z("#ifbackground").prop("checked",false);z("#divifbackground").css("visibility","hidden");U.css("background","");U.css("padding","0px")}break}}});function G(){var U;var S=z("#usestyles");for(var T=0;T<k.items.length;T++){U=k.items[T];if(U==undefined){continue}if(U.id==undefined){continue}S.append("<option value='"+U.id+"'>"+U.name+"</option>");if(U.id>=M.style){M.style=U.id;M.style++}}z("#updatestyle, #renamestyle, #deletestyle").attr("disabled","disabled")}function p(){var aa=o(a.layer);z("#statescontainer").empty();if(aa==undefined){return}for(var X=0;X<aa.length;X++){var S=aa[X];if(S==undefined){continue}if(S.stateid>=M.state){M.state=S.stateid;M.state++}for(var W=0;W<aa.length;W++){var Z=aa[W];if(Z.sortid==X){var Y="Text State";if(Z.type=="html"){Y="Html State"}else{if(Z.type=="image"){Y="Image State"}}var T='<li data-id="'+Z.stateid+'" class="ui-state-highlight layerstate">'+Y+'<button class="btn btn-danger btn-sm" type="button" title="Delete State"><span class="glyphicon glyphicon-trash"></span></button></li>';z("#statescontainer").append(T);break}}}var U=j[a.layer];if(U==undefined){return}if(U.selstate==-1){return}var V='<div class="selstatediv"></div>';z("li.layerstate").removeClass("selstate").find(z("div")).remove();z("li.layerstate[data-id="+U.selstate+"]").addClass("selstate").append(V);a.state=U.selstate;q(a.layer,a.state);n("state")}z(document).on("click","div.imagelayer",function(){if(E){return}var T=z(this).attr("data-id");if(a.layer==T||h.ispreview){return}B(a.layer,a.state,true);var S=j[a.layer];if(S==undefined){S={};j[a.layer]=S}S.selstate=a.state;a.state=-1;M.state=0;z(".layer").removeClass("selected");z(this).addClass("selected");a.layer=T;d=z(this);n("layer");n("state");p()});function B(W,V,S){if(W==-1||V==-1){return}S=typeof S!=="undefined"?S:false;var U=o(W,V);if(a.state!=-1){if(U.type=="text"){U.text=z("#statecontent").val()}else{if(U.type=="html"){U.html=z("#statecontentdiv").html()}}U.displayfor=z("#displaystate").val();U.delayfor=z("#delaystate").val();U.afterfin=z("#laststatefin option:selected").val();U.onappear=z("#onappeartype option:selected").val();U.onappeareasing=z("#onappeareasing option:selected").val();U.onappearspeed=z("#onappearspeed").val();U.ondisappear=z("#ondisappeartype").val();U.ondisappeareasing=z("#ondisappeareasing option:selected").val();U.ondisappearspeed=z("#ondisappearspeed").val();U.staticeffect="none"}if(S){var T=o(W);z("li.layerstate").each(function(X){var aa=z(this).attr("data-id");for(var Y=0;Y<T.length;Y++){var Z=T[Y];if(Z.stateid!=aa){continue}Z.sortid=X;break}})}}function o(Z,X,Y,W){Y=typeof Y!=="undefined"?Y:false;W=typeof W!=="undefined"?W:false;X=typeof X!=="undefined"?X:-1;var U=[];if(I.states==undefined){I.states={};I.states.items=[]}for(var V=0;V<I.states.items.length;V++){if(I.states.items[V]==undefined){continue}if(I.states.items[V].layerid!=Z){continue}if(W){delete I.states.items[V];continue}if(X==-1){U.push(I.states.items[V]);continue}if(I.states.items[V].stateid!=X){continue}if(Y){delete I.states.items[V];return}return I.states.items[V]}if(W){for(var T=0;T<I.layers.items.length;T++){if(I.layers.items[T]==undefined){continue}if(I.layers.items[T].id!=Z){continue}delete I.layers.items[T];break}return}if(X==-1){return U}var S={};S.layerid=Z;S.stateid=X;S.type="text";S.text="";S.html="";I.states.items.push(S);return S}function s(T,V,S,W){var U;U=T.toHexString();z("#fontexample").css("background",U);z("#back-color-value").val(U)}function R(S){var T;T=S.toHexString();z("#fontexample").css("color",T);z("#font-color-value").val(T)}function D(){if(z("#newtextstate").length){a.layer=-1;z("#statescontainer").sortable({cursor:"move",start:function(U,V){B(a.layer,a.state);var T='<div class="selstatediv"></div>';z("li.layerstate").removeClass("selstate").find(z("div")).remove();V.item.addClass("selstate").append(T);var W=V.item.attr("data-id");a.state=W;q(a.layer,a.state);n("state")}}).disableSelection();z("#statesettings").tabs();z("#statesettings").tabs().hide();k.items=[];w();if(I.layers==undefined){I.layers={};I.layers.items=[]}if(I.states==undefined){I.states={};I.states.items=[]}n("layer");G();var S=z("#fontexample");z("#slider-font-size").slider({range:"min",value:15,min:8,max:82,slide:function(T,U){z("#font-size").val(U.value+"px");S.css("font-size",U.value+"px")}});z("#slider-radius-size").slider({range:"min",value:10,min:0,max:50,slide:function(T,U){z("#radius-size").val(U.value+"px");S.css("border-radius",U.value+"px")}});z("#slider-padding-size").slider({range:"min",value:0,min:0,max:20,slide:function(T,U){z("#padding-size").val(U.value+"px");S.css("padding",U.value+"px")}});z("#radius-size").val(z("#slider-radius-size").slider("value")+"px");z("#padding-size").val(z("#slider-padding-size").slider("value")+"px");S.css("border-radius",z("#slider-radius-size").slider("value")+"px");z("#font-color-value").val("#000000");z("#back-color-value").val("#ffffff");z("#showdialog").dialog({autoOpen:false,height:640,width:780,modal:true,draggable:false,resizable:false,closeOnEscape:false,open:function(U,X){var Y=z(".ui-dialog:visible");z(Y).css("z-index",300002);z(".ui-widget-overlay").each(function(){z(this).next(".ui-dialog").andSelf().wrapAll('<div class="w3exvtfscope w3exvtfdel" />')});z("span.ui-icon-closethick").css({left:"0px",top:"0px"});var Z=z("#fontexample");z("#font-size").val(z("#slider-font-size").slider("value")+"px");Z.css("font-size",z("#slider-font-size").slider("value")+"px");var T="#000000";var W="#ffffff";z("#back-color").spectrum({color:W,className:"full-spectrum",appendTo:"#dialogstyles",showPalette:true,showInput:true,showSelectionPalette:true,maxPaletteSize:10,preferredFormat:"hex",change:s,palette:O});z("#font-color").spectrum({color:T,className:"full-spectrum",appendTo:"#dialogstyles",showPalette:true,showInput:true,showSelectionPalette:true,maxPaletteSize:10,preferredFormat:"hex",change:R,palette:O});var V=o(a.layer,a.state);A={};if(t(V)&&t(V.style)){A.fontsize=V.style.fontsize;A.fontcolor=V.style.fontcolor;A.fontfamily=V.style.fontfamily;A.ifbackground=V.style.ifbackground;if(V.style.ifbackground){A.backcolor=V.style.backcolor;A.radiussize=V.style.radiussize;A.padding=V.style.padding}z("#font-size").val(A.fontsize+"px");z("#font-family").val(A.fontfamily);Z.css("font-size",A.fontsize+"px");z("#slider-font-size").slider("value",A.fontsize);z("#font-color").spectrum("set",A.fontcolor);z("#font-color-value").val(A.fontcolor);Z.css("color",A.fontcolor);Z.css("font-family",A.fontfamily);if(A.ifbackground){z("#divifbackground").css("visibility","visible");z("#ifbackground").prop("checked",true);Z.css("background",A.backcolor);z("#back-color").spectrum("set",A.backcolor);z("#slider-radius-size").slider("value",A.radiussize);z("#back-color-value").val(A.backcolor);z("#radius-size").val(A.radiussize+"px");z("#slider-padding-size").slider("value",A.padding);z("#padding-size").val(A.padding+"px");Z.css("border-radius",A.radiussize+"px");Z.css("padding",A.padding+"px")}else{Z.css("background","");z("#back-color").spectrum("set","#ffffff");z("#slider-radius-size").slider("value",0);z("#slider-padding-size").slider("value",0);z("#padding-size").val("0px");z("#back-color-value").val(W);z("#radius-size").val("0px");Z.css("border-radius","0px");Z.css("padding","0px");z("#ifbackground").prop("checked",false);z("#divifbackground").css("visibility","hidden")}}else{z("#font-size").val("15px");Z.css("font-size","15px");z("#slider-font-size").slider("value",15);z("#font-color-value").val(T);Z.css("color",T);Z.css("font-family","");Z.css("background","");Z.css("padding","0px");z("#back-color-value").val(W);z("#slider-radius-size").slider("value",0);z("#radius-size").val("0px");Z.css("border-radius","0px");z("#ifbackground").prop("checked",false);z("#divifbackground").css("visibility","hidden")}},close:function(T,U){z("#font-color").spectrum("destroy");z("#back-color").spectrum("destroy");z("#updatestyle, #renamestyle, #deletestyle").attr("disabled","disabled");z("#usestyles").val("none")},buttons:{OK:function(){var T=o(a.layer,a.state);if(t(T)){if(!t(T.style)){T.style={}}T.style.fontsize=z("#slider-font-size").slider("value");T.style.fontcolor=z("#font-color-value").val();T.style.fontfamily=z("#font-family").val();T.style.ifbackground=z("#ifbackground").prop("checked");if(T.style.ifbackground){T.style.backcolor=z("#back-color-value").val();T.style.radiussize=z("#slider-radius-size").slider("value");T.style.padding=z("#slider-padding-size").slider("value")}q(a.layer,a.state)}z(this).dialog("close")},Cancel:function(){z(this).dialog("close")}}})}}z("#deletelayer").click(function(){if(a.layer==-1){return}o(a.layer,0,false,true);z('#w3_ibacontainer0 > div[data-id="'+a.layer+'"]').remove();a.layer=-1;a.state=-1;z("#statescontainer").empty();n("layer");n("state")});function w(){if(W3Ex.iselement!=undefined){E=true;z(x.deletelayer).attr("disabled","disabled");z(x.newlayer).attr("disabled","disabled");a.layer=0;d=z(".layer");var Z={};Z.id=0;I.layers={};I.layers.items=[];I.layers.items.push(Z);if(W3Ex.imagearrlayers!=undefined){I.states={};I.states.items=[];if(W3Ex.imagearrlayers.states!=undefined){I.states=W3Ex.imagearrlayers.states;p()}}}else{if(W3Ex.imagearrlayers!=undefined){I=W3Ex.imagearrlayers;if(I.layers!=undefined){for(var V=0;V<I.layers.items.length;V++){var U=I.layers.items[V];if(U.id==undefined){I.layers.items.splice(V,1);V--;continue}var Y=U.id;if(M.layer<=Y){M.layer=Y;M.layer++}var S='<div data-id="'+Y+'" class="defaultlayer layer imagelayer defaultstyle"> Layer<br/></div>';z("#w3_ibacontainer0").append(S);var X=z("#w3_ibacontainer0 > div:last");X.draggable({containment:"parent",start:function(){var ab=z(this).attr("data-id");if(a.layer==ab||h.ispreview){return}B(a.layer,a.state,true);var aa=j[a.layer];if(aa==undefined){aa={};j[a.layer]=aa}aa.selstate=a.state;a.state=-1;M.state=0;z(".layer").removeClass("selected");z(this).addClass("selected");a.layer=ab;d=z(this);n("layer");n("state");p()}});X.css("top",parseInt(U.top));X.css("left",parseInt(U.left))}}}}if(W3Ex.arrstyles!=undefined&&W3Ex.arrstyles.items!=undefined){for(var T=0;T<W3Ex.arrstyles.items.length;T++){var W=W3Ex.arrstyles.items[T];if(W==undefined){W3Ex.arrstyles.items.splice(T,1);T--;continue}if(W.id==undefined){W3Ex.arrstyles.items.splice(T,1);T--;continue}}k=W3Ex.arrstyles}}z("#savechanges").click(function(){if(I.layers.items.length==0){return}B(a.layer,a.state,true);for(var W=0;W<I.layers.items.length;W++){var V=I.layers.items[W];if(V==undefined){continue}var S=z('.layer[data-id="'+V.id+'"]');if(S.length){V.top=S.position().top;V.left=S.position().left}}var T=z(this);T.addClass("disabled").css("position","relative").append('<div class="showajax"></div>');var Z={};Z.action="ibeffects_ajax_request";Z.type="savechanges";if(E){Z.type="saveelementchanges"}Z.nonce=W3ExIBA.nonce;var Y={};Y.id=W3Ex.imageid;Y.layers=I;if(t(I.states.items)&&t(I.layers.items)){Y.layercount=0;Y.statecount=0;for(var W=0;W<I.states.items.length;W++){if(!t(I.states.items[W])){continue}if(!t(I.states.items[W].layerid)){continue}var X=I.states.items[W];if(X.type=="html"){X.html=X.html.replace(/\\"/g,'"')}Y.statecount++}for(var U=0;U<I.layers.items.length;U++){if(!t(I.layers.items[U])){continue}Y.layercount++}}Z.data=Y;jQuery.ajax({type:"post",dataType:"json",url:W3ExIBA.ajaxurl,data:Z,complete:function(aa){T.removeClass("disabled").css("position","static");T.find(".showajax").remove()}})});z("#newlayer").click(function(){B(a.layer,a.state,true);if(a.layer!=-1){var T=j[a.layer];if(T==undefined){T={};j[a.layer]=T}T.selstate=a.state}a.state=-1;M.state=0;var V=M.layer;M.layer++;var S='<div data-id="'+V+'" class="defaultlayer layer imagelayer defaultstyle">Empty Layer<br/><div style="font-size:12px;">/todo: add states/</div></div>';var U={};U.id=V;I.layers.items.push(U);z("#w3_ibacontainer0").append(S);z("#w3_ibacontainer0 > div:last").draggable({containment:"parent",start:function(){var X=z(this).attr("data-id");if(a.layer==X||h.ispreview){return}B(a.layer,a.state,true);var W=j[a.layer];if(W==undefined){W={};j[a.layer]=W}W.selstate=a.state;a.state=-1;M.state=0;z(".layer").removeClass("selected");z(this).addClass("selected");a.layer=X;d=z(this);n("layer");n("state");p()}})});function q(V,U){if(V==-1||U==-1){return}var T=o(V,U);z("#changestyle").removeAttr("disabled");z("#contenttype").text("Text");z("#statecontentdiv").removeClass("ui-nobackground ui-widget ui-state-default ui-corner-all");z("#statecontentdiv").hide();z("#editcontent").hide();z("#statecontent").show();T.text=T.text.replace(new RegExp("\n","g"),"<br />");T.text=T.text.replace(/\\\\/g,"@@@@@");T.text=T.text.replace(/\\/g,"");T.text=T.text.replace(/@@@@@/g,"\\");z("#statecontent").val(T.text);d.html(T.text);d.removeClass("defaultstyle");if(t(T.style)){var S=T.style;d.css({"font-size":S.fontsize+"px",color:S.fontcolor,"font-family":S.fontfamily});if(S.ifbackground==="true"){S.ifbackground=true}if(S.ifbackground==="false"){S.ifbackground=false}if(S.ifbackground){d.css({background:S.backcolor,"border-radius":S.radiussize+"px",padding:S.padding+"px"})}else{d.css({background:"","border-radius":"",padding:"0px"})}}else{d.css({"font-size":"15px",color:"#000000",background:"","border-radius":"",padding:"0px"})}if(t(T.displayfor)){z("#displaystate").val(T.displayfor)}else{z("#displaystate").val(4000)}if(t(T.delayfor)){z("#delaystate").val(T.delayfor)}else{z("#delaystate").val(0)}if(t(T.afterfin)){z("#laststatefin").val(T.afterfin)}else{z("#laststatefin").val("loop")}if(t(T.onappear)){z("#onappeartype").val(T.onappear)}else{z("#onappeartype").val("fadein")}if(t(T.onappeareasing)){z("#onappeareasing").val(T.onappeareasing)}else{z("#onappeareasing").val("ease")}if(t(T.onappearspeed)){z("#onappearspeed").val(T.onappearspeed)}else{z("#onappearspeed").val(500)}if(t(T.ondisappear)){z("#ondisappeartype").val(T.ondisappear)}else{z("#ondisappeartype").val("fadeout")}if(t(T.ondisappeareasing)){z("#ondisappeareasing").val(T.ondisappeareasing)}else{z("#ondisappeareasing").val("ease")}if(t(T.ondisappearspeed)){z("#ondisappearspeed").val(T.ondisappearspeed)}else{z("#ondisappearspeed").val(500)}}function e(S){d.html("");z("#contenttype").text("Text");z("#statecontentdiv").removeClass("ui-nobackground ui-widget ui-state-default ui-corner-all");z("#statecontentdiv").hide();z("#editcontent").hide();z("#statecontent").show();z("#statecontent").val("");z("#changestyle").removeAttr("disabled");d.removeClass("defaultstyle");d.css({"font-size":"15px",color:"#000000",background:"","border-radius":"",padding:"0px"});z("#displaystate").val(4000);z("#delaystate").val(0);z("#laststatefin").val("loop");z("#onappeartype").val("fadein");z("#onappeareasing").val("ease");z("#onappearspeed").val(500);z("#ondisappeartype").val("fadeout");z("#ondisappeareasing").val("ease");z("#ondisappearspeed").val(500)}z(document).on("click","li.layerstate > button",function(T){var S=z(this).parent().attr("data-id");o(a.layer,S,true);if(S==a.state){a.state=-1;e("text");n("state")}z(this).parent().remove();n("layer");T.stopPropagation()});z(document).on("click","li.layerstate",function(){B(a.layer,a.state);var T=z(this).attr("data-id");var S='<div class="selstatediv"></div>';z("li.layerstate").removeClass("selstate").find(z("div")).remove();z(this).addClass("selstate").append(S);a.state=T;q(a.layer,a.state);n("state")});z("#statecontent").keyup(function(){var S=z(this).val();S=S.replace(new RegExp("\n","g"),"<br />");d.html(S)});(function(){z("#newtextstate").click(function(){B(a.layer,a.state);var V=M.state;M.state++;var T='<div class="selstatediv"></div>';var S='<li data-id="'+V+'" class="ui-state-highlight layerstate" >Text State<button class="btn btn-danger btn-sm deletestate" type="button" title="Delete State"><span class="glyphicon glyphicon-trash"></span></button></li>';z("li.layerstate").removeClass("selstate").find(z("div")).remove();z("#statescontainer").append(S);z("#statescontainer > li:last").addClass("selstate").append(T);a.state=V;n("state");var U=o(a.layer,V);n("layer");U.type="text";e("text")});D()})();z(document).on("click","input:radio",function(){var T=z(this).attr("id");if(Q[T]!=undefined){var S='Url: <a href="'+Q[T]+'" target="_blank">'+Q[T]+"</a>";z("#imageurl").html(S);z("#imagesaveok").removeAttr("disabled")}});z(document).on("click",".deletelayer",function(){var V=z(this).attr("data-id");var T=z(this);var S={};S.action="ibeffects_ajax_request";S.type="deleteimage";S.nonce=W3ExIBA.nonce;var U={};U.id=V;S.data=U;jQuery.ajax({type:"post",dataType:"json",url:W3ExIBA.ajaxurl,data:S,success:function(W){T.parents("tr:first").remove()},error:function(W){}})});var u;z("#newimage").click(function(S){S.preventDefault();if(u){u.open();return}u=wp.media.frames.file_frame=wp.media({title:"Choose Image",library:{type:"image"},button:{text:"Choose Image"},multiple:false,displaySettings:true,displayUserSettings:true});u.on("select",function(){var Y=u.state().get("selection").first().toJSON();var W=Y.sizes;var V="Select image size to continue<br /><br />";var T=0;Q.length=0;var X="";for(key in W){var U=Y.sizes[key];if(U==F){continue}if(key=="thumbnail"){X=U.url}V+='<input type="radio" id="'+T+'" name="radioi"><label for="'+T+'"> ';V+=(key.charAt(0).toUpperCase()+key.slice(1))+" - ( width: "+U.width+" ) ( height: "+U.height+" )</label> <br/>";Q[T]=U.url;if(X==""){X=U.url}T++}if(X!=""){z("#imagedivback").css("background-image","url("+X+")")}V+='<div id="imageurl"></div>';z("#imagesizes").html(V);z("#newimagediv").css("visibility","visible").hide().fadeIn("slow",function(){z("html, body").animate({scrollTop:z(document).height()},"slow")});z("#imagesaveok").unbind("click");z("#imagesaveok").click(function(){var Z={};Z.action="ibeffects_ajax_request";Z.type="newimage";Z.nonce=W3ExIBA.nonce;var aa={};var ab=z("input[name=radioi]:checked").attr("id");if(Q[ab]!=undefined){aa.img=Q[ab]}aa.thumb=X;Z.data=aa;jQuery.ajax({type:"post",dataType:"json",url:W3ExIBA.ajaxurl,data:Z,success:function(ac){var ad="<tr><td >"+ac.id.id+"</td><td >"+ac.id.shortcode+'</td><td ><div style="text-align:left;">'+ac.id.infoto+'</div></td><td style="padding-top:2px;padding-bottom:6px;"><div class="centerblock"><div class="imagebuttons"><a class="btn btn-success btn-sm editlayer" href="admin.php?page=ibeffects&edit='+ac.id.id+'"><span class="glyphicon glyphicon-pencil"></span>Edit</a><br/><br /><br /><button data-id="'+ac.id.id+'" class="btn btn-danger btn-sm deletelayer"><span class="glyphicon glyphicon-trash"></span>Delete</button>	</div><div class="shownimages""><img src="'+X+'"></img></div><div style="clear:both;"> </div></div></td></tr>';z("#showimages > tbody:last").append(ad);z("#newimage").removeAttr("disabled");z("#newimagediv").fadeOut()},error:function(ac){z("#newimage").removeAttr("disabled");z("#newimagediv").fadeOut()}})});z("#imagesaveok").attr("disabled","disabled");z("#imagesavecancel").click(function(){z("#newimage").removeAttr("disabled");z("#newimagediv").fadeOut()});z("#newimage").attr("disabled","disabled")});u.open()});function t(S){return S!==F}function f(U){var S=m(U);var T={visibility:"hidden"};S.domitem.css(T);P.push(S)}function J(V){var Y={};var S={};var U=V.domitem;Y.duration=V.onappspeed;Y.complete=H;var W=false;var T=V.width;var X=Math.round(T/2);var Z=V.height;var aa=Math.round(Z/2);if(V.state.start&&!V.state.finish){Y.easing=V.onappeasing;U.css({top:V.top+"px",left:V.left+"px",visibility:"visible",opacity:0,transition:"",transform:""});switch(V.onappear){case"fadein":Y.opacity=1;break;case"top":U.css({top:(V.top-i)+"px"});Y.top=V.top+"px";Y.opacity=1;break;case"left":U.css({left:(V.left-i)+"px"});Y.left=V.left+"px";Y.opacity=1;break;case"right":U.css({left:(V.left+i)+"px"});Y.left=V.left+"px";U.css({height:V.height+"px"});Y.opacity=1;break;case"bottom":U.css({top:(V.top+i)+"px"});Y.top=V.top+"px";Y.opacity=1;break;default:break}}else{if(V.state.finish){Y.duration=V.ondisspeed;Y.easing=V.ondiseasing;U.css({top:V.top+"px",left:V.left+"px",transition:"",transform:""});switch(V.ondis){case"fadeout":Y.opacity=0;break;case"top":Y.top=(V.top-i)+"px";Y.opacity=0;break;case"left":Y.left=(V.left-i)+"px";Y.opacity=0;break;case"right":Y.left=(V.left+i)+"px";Y.opacity=0;break;case"bottom":Y.top=(V.top+i)+"px";Y.opacity=0;break;case"none":Y.duration=10;Y.opacity=0;break;default:break}}}if(V.state.firstshow){V.state.firstshow=false;V.state.start=true;V.state.finish=false;Y.delay=V.delayfor;U.transition(Y)}else{if(V.state.finish){Y.delay=V.displayfor;S.delay=V.displayfor;U.transition(Y)}else{Y.delay=0;S.delay=0;U.transition(Y)}}}function H(W){var W=typeof W!=="undefined"?W:-1;if(!h.ispreview){return}var X;if(W!=-1){X=W}else{X=z(this).attr("id")}for(var U=0;U<P.length;U++){var T=P[U];if(T.domid==X){if(W!=-1){J(T);return}if(T.state.start){T.state.start=false;T.state.finish=true;if(K(T)){if(T.afterfin=="stop"){return}if(T.afterfin!="loop"){var S=T.domitem;return}}J(T)}else{if(T.state.finish){var S=T.domitem;S.css({top:T.top+"px",left:T.left+"px",transform:"",transition:"",opacity:0,visibility:"hidden"});var V;var Y=v(T);V=Y.anim;T.state.start=false;T.state.finish=false;T.state.curritem=false;V.state.start=true;V.state.curritem=true;V.state.finish=false;J(V)}}break}}}function m(T){var V={};var S=z("#w3_effect"+T.stateid+"-"+h.counter);V.domitem=S;var W={start:false,finish:false,curritem:false,isfirst:false,islast:false,firstshow:false};V.state=W;V.domid=S.attr("id");V.width=parseInt(S.outerWidth(),10);V.height=S.outerHeight();V.sortid=parseInt(T.sortid,10);V.layerid=0;V.layerdom=h.layer.domitem;V.delayfor=parseInt(T.delayfor,10);V.displayfor=parseInt(T.displayfor,10);V.afterfin=T.afterfin;V.onappear=T.onappear;V.onappeasing=T.onappeareasing;V.onappspeed=parseInt(T.onappearspeed,10);V.ondis=T.ondisappear;V.ondiseasing=T.ondisappeareasing;V.ondisspeed=parseInt(T.ondisappearspeed,10);V.staticeffect="none";var U=h.layer;if(U.width<V.width){U.width=V.width}if(U.height<V.height){U.height=V.height}S.css({position:"absolute",display:"inline-block",width:V.width+"px",height:V.height+"px","padding-right":"0px"});return V}function l(){var V=h.layer;var X=z("#mainimage");if(X.width()>X.height()){i=parseInt(X.width()*0.14,10)}else{i=parseInt(X.height()*0.14,10)}if(E){i=40}var W=h.arrstates;for(var U=0;U<W.length;U++){var Z=W[U];f(Z)}V.domitem.removeClass("w3_ibainnerhold");if(E){V.domitem.css({position:"relative",display:"inline-block",width:V.width,height:V.height})}else{V.domitem.css({position:"absolute",top:V.top,left:V.left,width:V.width,height:V.height})}for(var S=0;S<P.length;S++){var Y=P[S];if(E){Y.domitem.css("visibility","hidden")}if(Y.height>V.height){V.domitem.css({height:Y.height})}if(Y.width>V.width){V.domitem.css({width:Y.width})}}for(var T=0;T<P.length;T++){var Y=P[T];if(Y.height<V.height){Y.domitem.css("top",Math.round((V.height-Y.height)/2)+"px")}if(Y.width<V.width){Y.domitem.css("left",Math.round((V.width-Y.width)/2)+"px")}Y.left=Y.domitem.position().left;Y.top=Y.domitem.position().top}for(var U=0;U<P.length;U++){var Y=P[U];if(Y.sortid==0){Y.state.start=true;Y.state.finish=false;Y.state.curritem=true;Y.state.isfirst=true;Y.state.firstshow=true;Y.state.islast=K(Y);J(Y);break}}}function c(){var V=0;var Y=0;P.length=0;h.counter++;if(E){z('<div id="w3_previewlayer"></div>').appendTo(z(".w3c_wrap_element"));h.layer.domitem=z("#w3_previewlayer")}else{z('<div id="w3_previewlayer" class="w3_ibainnerhold"></div>').appendTo(z("#w3_ibacontainer0"));h.layer.domitem=z("#w3_previewlayer")}var W=h.arrstates;for(var T=0;T<W.length;T++){var X=W[T];z('<div style="position: absolute;left:0px;top:0px;display:inline;" data-id="'+X.stateid+'" id="w3_effect'+X.stateid+"-"+h.counter+'" class="w3_effect"></div>').appendTo(h.layer.domitem);var S=z("#w3_effect"+X.stateid+"-"+h.counter);X.text=X.text.replace(new RegExp("\n","g"),"<br />");S.html(X.text);if(t(X.style)){var U=X.style;S.css({"font-size":U.fontsize+"px",color:U.fontcolor,"font-family":U.fontfamily});if(U.ifbackground==="true"){U.ifbackground=true}if(U.ifbackground==="false"){U.ifbackground=false}if(U.ifbackground){S.css({background:U.backcolor,"border-radius":U.radiussize+"px",padding:U.padding+"px"})}else{S.css({background:"","border-radius":"",padding:"0px"})}}else{S.css({"font-size":"15px",color:"#000000",background:"","border-radius":"",padding:"0px"})}}if(document.getElementById("w3_previewlayer")){imagesLoaded(document.getElementById("w3_previewlayer"),function(Z){l()})}else{l()}}function K(U){for(var S=0;S<P.length;S++){var T=P[S];if(T.sortid>U.sortid){return false}}return true}function v(X){var Y={};Y.islast=false;Y.isfirst=false;Y.anim=X;var T=false;for(var V=0;V<P.length;V++){var W=P[V];if((W.sortid-X.sortid)==1){Y.anim=W;T=true;break}}var Z=false;for(var U=0;U<P.length;U++){var S=P[U];if(S.sortid==0){if(!T){Y.anim=S;Y.isfirst=true}}else{Z=true}}if(!Z){Y.islast=true}return Y}return{incConItems:function(){C++},finLoad:function(){g++}}})(jQuery)});