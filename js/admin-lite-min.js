/*!
 * jQuery Transit - CSS3 transitions and transformations
 * (c) 2011-2012 Rico Sta. Cruz <rico@ricostacruz.com>
 * MIT Licensed.
 *
 * http://ricostacruz.com/jquery.transit
 * http://github.com/rstacruz/jquery.transit
 */
(function(x){x.transit={version:"0.9.9",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:true,useTransitionEnd:false};var E=document.createElement("div");var r={};function G(a){if(a in E.style){return a}var b=["Moz","Webkit","O","ms"];var e=a.charAt(0).toUpperCase()+a.substr(1);if(a in E.style){return a}for(var c=0;c<b.length;++c){var d=b[c]+e;if(d in E.style){return d}}}function D(){E.style[r.transform]="";E.style[r.transform]="rotateY(90deg)";return E.style[r.transform]!==""}var H=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;r.transition=G("transition");r.transitionDelay=G("transitionDelay");r.transform=G("transform");r.transformOrigin=G("transformOrigin");r.transform3d=D();var z={transition:"transitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"};var C=r.transitionEnd=z[r.transition]||null;for(var s in r){if(r.hasOwnProperty(s)&&typeof x.support[s]==="undefined"){x.support[s]=r[s]}}E=null;x.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(.6,.04,.98,.335)",linear:"cubic-bezier(1,1,1,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"};x.cssHooks["transit:transform"]={get:function(a){return x(a).data("transform")||new y()},set:function(b,c){var a=c;if(!(a instanceof y)){a=new y(a)}if(r.transform==="WebkitTransform"&&!H){b.style[r.transform]=a.toString(true)}else{b.style[r.transform]=a.toString()}x(b).data("transform",a)}};x.cssHooks.transform={set:x.cssHooks["transit:transform"].set};if(x.fn.jquery<"1.8"){x.cssHooks.transformOrigin={get:function(a){return a.style[r.transformOrigin]},set:function(b,a){b.style[r.transformOrigin]=a}};x.cssHooks.transition={get:function(a){return a.style[r.transition]},set:function(b,a){b.style[r.transition]=a}}}u("scale");u("translate");u("rotate");u("rotateX");u("rotateY");u("rotate3d");u("perspective");u("skewX");u("skewY");u("x",true);u("y",true);function y(a){if(typeof a==="string"){this.parse(a)}return this}y.prototype={setFromString:function(a,b){var c=(typeof b==="string")?b.split(","):(b.constructor===Array)?b:[b];c.unshift(a);y.prototype.set.apply(this,c)},set:function(a){var b=Array.prototype.slice.apply(arguments,[1]);if(this.setter[a]){this.setter[a].apply(this,b)}else{this[a]=b.join(",")}},get:function(a){if(this.getter[a]){return this.getter[a].apply(this)}else{return this[a]||0}},setter:{rotate:function(a){this.rotate=t(a,"deg")},rotateX:function(a){this.rotateX=t(a,"deg")},rotateY:function(a){this.rotateY=t(a,"deg")},scale:function(b,a){if(a===undefined){a=b}this.scale=b+","+a},skewX:function(a){this.skewX=t(a,"deg")},skewY:function(a){this.skewY=t(a,"deg")},perspective:function(a){this.perspective=t(a,"px")},x:function(a){this.set("translate",a,null)},y:function(a){this.set("translate",null,a)},translate:function(b,a){if(this._translateX===undefined){this._translateX=0}if(this._translateY===undefined){this._translateY=0}if(b!==null&&b!==undefined){this._translateX=t(b,"px")}if(a!==null&&a!==undefined){this._translateY=t(a,"px")}this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var a=(this.scale||"1,1").split(",");if(a[0]){a[0]=parseFloat(a[0])}if(a[1]){a[1]=parseFloat(a[1])}return(a[0]===a[1])?a[0]:a},rotate3d:function(){var a=(this.rotate3d||"0,0,0,0deg").split(",");for(var b=0;b<=3;++b){if(a[b]){a[b]=parseFloat(a[b])}}if(a[3]){a[3]=t(a[3],"deg")}return a}},parse:function(a){var b=this;a.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(e,c,d){b.setFromString(c,d)})},toString:function(a){var b=[];for(var c in this){if(this.hasOwnProperty(c)){if((!r.transform3d)&&((c==="rotateX")||(c==="rotateY")||(c==="perspective")||(c==="transformOrigin"))){continue}if(c[0]!=="_"){if(a&&(c==="scale")){b.push(c+"3d("+this[c]+",1)")}else{if(a&&(c==="translate")){b.push(c+"3d("+this[c]+",0)")}else{b.push(c+"("+this[c]+")")}}}}}return b.join(" ")}};function v(b,c,a){if(c===true){b.queue(a)}else{if(c){b.queue(c,a)}else{a()}}}function A(a){var b=[];x.each(a,function(c){c=x.camelCase(c);c=x.transit.propertyMap[c]||x.cssProps[c]||c;c=F(c);if(x.inArray(c,b)===-1){b.push(c)}});return b}function B(f,c,a,g){var e=A(f);if(x.cssEase[a]){a=x.cssEase[a]}var b=""+w(c)+" "+a;if(parseInt(g,10)>0){b+=" "+w(g)}var d=[];x.each(e,function(h,i){d.push(i+" "+b)});return d.join(", ")}x.fn.transition=x.fn.transit=function(f,n,g,c){var b=this;var k=0;var i=true;if(typeof n==="function"){c=n;n=undefined}if(typeof g==="function"){c=g;g=undefined}if(typeof f.easing!=="undefined"){g=f.easing;delete f.easing}if(typeof f.duration!=="undefined"){n=f.duration;delete f.duration}if(typeof f.complete!=="undefined"){c=f.complete;delete f.complete}if(typeof f.queue!=="undefined"){i=f.queue;delete f.queue}if(typeof f.delay!=="undefined"){k=f.delay;delete f.delay}if(typeof n==="undefined"){n=x.fx.speeds._default}if(typeof g==="undefined"){g=x.cssEase._default}n=w(n);var m=B(f,n,g,k);var d=x.transit.enabled&&r.transition;var l=d?(parseInt(n,10)+parseInt(k,10)):0;if(l===0){var e=function(o){b.css(f);if(c){c.apply(b)}if(o){o()}};v(b,i,e);return b}var h={};var a=function(o){var p=false;var q=function(){if(p){b.unbind(C,q)}if(l>0){b.each(function(){this.style[r.transition]=(h[this]||null)})}if(typeof c==="function"){c.apply(b)}if(typeof o==="function"){o()}};if((l>0)&&(C)&&(x.transit.useTransitionEnd)){p=true;b.bind(C,q)}else{window.setTimeout(q,l)}b.each(function(){if(l>0){this.style[r.transition]=m}x(this).css(f)})};var j=function(o){this.offsetWidth;a(o)};v(b,i,j);return this};function u(a,b){if(!b){x.cssNumber[a]=true}x.transit.propertyMap[a]=r.transform;x.cssHooks[a]={get:function(c){var d=x(c).css("transit:transform");return d.get(a)},set:function(d,c){var e=x(d).css("transit:transform");e.setFromString(a,c);x(d).css({"transit:transform":e})}}}function F(a){return a.replace(/([A-Z])/g,function(b){return"-"+b.toLowerCase()})}function t(a,b){if((typeof a==="string")&&(!a.match(/^[\-0-9\.]+$/))){return a}else{return""+a+b}}function w(a){var b=a;if(x.fx.speeds[b]){b=x.fx.speeds[b]}return t(b,"ms")}x.transit.getTransitionValue=B})(jQuery);
/*!
 * imagesLoaded PACKAGED v3.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
(function(){function d(){}function b(i,h){for(var j=i.length;j--;){if(i[j].listener===h){return j}}return -1}function g(h){return function(){return this[h].apply(this,arguments)}}var a=d.prototype,c=this,f=c.EventEmitter;a.getListeners=function(k){var j,l,h=this._getEvents();if("object"==typeof k){j={};for(l in h){h.hasOwnProperty(l)&&k.test(l)&&(j[l]=h[l])}}else{j=h[k]||(h[k]=[])}return j},a.flattenListeners=function(i){var h,j=[];for(h=0;i.length>h;h+=1){j.push(i[h].listener)}return j},a.getListenersAsObject=function(i){var h,j=this.getListeners(i);return j instanceof Array&&(h={},h[i]=j),h||j},a.addListener=function(k,m){var h,j=this.getListenersAsObject(k),l="object"==typeof m;for(h in j){j.hasOwnProperty(h)&&-1===b(j[h],m)&&j[h].push(l?m:{listener:m,once:!1})}return this},a.on=g("addListener"),a.addOnceListener=function(i,h){return this.addListener(i,{listener:h,once:!0})},a.once=g("addOnceListener"),a.defineEvent=function(h){return this.getListeners(h),this},a.defineEvents=function(i){for(var h=0;i.length>h;h+=1){this.defineEvent(i[h])}return this},a.removeListener=function(k,m){var h,j,l=this.getListenersAsObject(k);for(j in l){l.hasOwnProperty(j)&&(h=b(l[j],m),-1!==h&&l[j].splice(h,1))}return this},a.off=g("removeListener"),a.addListeners=function(i,h){return this.manipulateListeners(!1,i,h)},a.removeListeners=function(i,h){return this.manipulateListeners(!0,i,h)},a.manipulateListeners=function(m,j,q){var h,l,p=m?this.removeListener:this.addListener,k=m?this.removeListeners:this.addListeners;if("object"!=typeof j||j instanceof RegExp){for(h=q.length;h--;){p.call(this,j,q[h])}}else{for(h in j){j.hasOwnProperty(h)&&(l=j[h])&&("function"==typeof l?p.call(this,h,l):k.call(this,h,l))}}return this},a.removeEvent=function(k){var j,l=typeof k,h=this._getEvents();if("string"===l){delete h[k]}else{if("object"===l){for(j in h){h.hasOwnProperty(j)&&k.test(j)&&delete h[j]}}else{delete this._events}}return this},a.removeAllListeners=g("removeEvent"),a.emitEvent=function(m,j){var q,h,l,p,k=this.getListenersAsObject(m);for(l in k){if(k.hasOwnProperty(l)){for(h=k[l].length;h--;){q=k[l][h],q.once===!0&&this.removeListener(m,q.listener),p=q.listener.apply(this,j||[]),p===this._getOnceReturnValue()&&this.removeListener(m,q.listener)}}}return this},a.trigger=g("emitEvent"),a.emit=function(i){var h=Array.prototype.slice.call(arguments,1);return this.emitEvent(i,h)},a.setOnceReturnValue=function(h){return this._onceReturnValue=h,this},a._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},a._getEvents=function(){return this._events||(this._events={})},d.noConflict=function(){return c.EventEmitter=f,d},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return d}):"object"==typeof module&&module.exports?module.exports=d:this.EventEmitter=d}).call(this),function(d){function b(e){var h=d.event;return h.target=h.target||h.srcElement||e,h}var g=document.documentElement,a=function(){};g.addEventListener?a=function(i,h,j){i.addEventListener(h,j,!1)}:g.attachEvent&&(a=function(j,k,h){j[k+h]=h.handleEvent?function(){var e=b(j);h.handleEvent.call(h,e)}:function(){var e=b(j);h.call(j,e)},j.attachEvent("on"+k,j[k+h])});var c=function(){};g.removeEventListener?c=function(i,h,j){i.removeEventListener(h,j,!1)}:g.detachEvent&&(c=function(k,j,l){k.detachEvent("on"+j,k[j+l]);try{delete k[j+l]}catch(h){k[j+l]=void 0}});var f={bind:a,unbind:c};"function"==typeof define&&define.amd?define("eventie/eventie",f):d.eventie=f}(this),function(b,a){"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(d,c){return a(b,d,c)}):"object"==typeof exports?module.exports=a(b,require("eventEmitter"),require("eventie")):b.imagesLoaded=a(b,b.EventEmitter,b.eventie)}(this,function(p,A,j){function k(c,a){for(var d in a){c[d]=a[d]}return c}function b(a){return"[object Array]"===q.call(a)}function g(d){var c=[];if(b(d)){c=d}else{if("number"==typeof d.length){for(var f=0,a=d.length;a>f;f++){c.push(d[f])}}else{c.push(d)}}return c}function B(d,a,f){if(!(this instanceof B)){return new B(d,a)}"string"==typeof d&&(d=document.querySelectorAll(d)),this.elements=g(d),this.options=k({},this.options),"function"==typeof a?f=a:k(this.options,a),f&&this.on("always",f),this.getImages(),x&&(this.jqDeferred=new x.Deferred);var c=this;setTimeout(function(){c.check()})}function w(a){this.img=a}function m(a){this.src=a,y[a]=this}var x=p.jQuery,z=p.console,l=z!==void 0,q=Object.prototype.toString;B.prototype=new A,B.prototype.options={},B.prototype.getImages=function(){this.images=[];for(var h=0,c=this.elements.length;c>h;h++){var v=this.elements[h];"IMG"===v.nodeName&&this.addImage(v);for(var a=v.querySelectorAll("img"),f=0,u=a.length;u>f;f++){var d=a[f];this.addImage(d)}}},B.prototype.addImage=function(c){var a=new w(c);this.images.push(a)},B.prototype.check=function(){function f(n,i){return c.options.debug&&l&&z.log("confirm",n,i),c.progress(n),s++,s===a&&c.complete(),!0}var c=this,s=0,a=this.images.length;if(this.hasAnyBroken=!1,!a){return this.complete(),void 0}for(var d=0;a>d;d++){var h=this.images[d];h.on("confirm",f),h.check()}},B.prototype.progress=function(c){this.hasAnyBroken=this.hasAnyBroken||!c.isLoaded;var a=this;setTimeout(function(){a.emit("progress",a,c),a.jqDeferred&&a.jqDeferred.notify&&a.jqDeferred.notify(a,c)})},B.prototype.complete=function(){var c=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var a=this;setTimeout(function(){if(a.emit(c,a),a.emit("always",a),a.jqDeferred){var d=a.hasAnyBroken?"reject":"resolve";a.jqDeferred[d](a)}})},x&&(x.fn.imagesLoaded=function(c,a){var d=new B(this,c,a);return d.jqDeferred.promise(x(this))}),w.prototype=new A,w.prototype.check=function(){var c=y[this.img.src]||new m(this.img.src);if(c.isConfirmed){return this.confirm(c.isLoaded,"cached was confirmed"),void 0}if(this.img.complete&&void 0!==this.img.naturalWidth){return this.confirm(0!==this.img.naturalWidth,"naturalWidth"),void 0}var a=this;c.on("confirm",function(d,f){return a.confirm(d.isLoaded,f),!0}),c.check()},w.prototype.confirm=function(c,a){this.isLoaded=c,this.emit("confirm",this,a)};var y={};return m.prototype=new A,m.prototype.check=function(){if(!this.isChecked){var a=new Image;j.bind(a,"load",this),j.bind(a,"error",this),a.src=this.src,this.isChecked=!0}},m.prototype.handleEvent=function(c){var a="on"+c.type;this[a]&&this[a](c)},m.prototype.onload=function(a){this.confirm(!0,"onload"),this.unbindProxyEvents(a)},m.prototype.onerror=function(a){this.confirm(!1,"onerror"),this.unbindProxyEvents(a)},m.prototype.confirm=function(c,a){this.isConfirmed=!0,this.isLoaded=c,this.emit("confirm",this,a)},m.prototype.unbindProxyEvents=function(a){j.unbind(a.target,"load",this),j.unbind(a.target,"error",this)},B});var W3Ex=W3Ex||{};jQuery(document).ready(function(){W3Ex.ibaengine=(function(z){var N=[["rgb(0, 0, 0)","rgb(67, 67, 67)","rgb(102, 102, 102)","rgb(204, 204, 204)","rgb(217, 217, 217)","rgb(255, 255, 255)"],["rgb(152, 0, 0)","rgb(255, 0, 0)","rgb(255, 153, 0)","rgb(255, 255, 0)","rgb(0, 255, 0)","rgb(0, 255, 255)","rgb(74, 134, 232)","rgb(0, 0, 255)","rgb(153, 0, 255)","rgb(255, 0, 255)"],["rgb(230, 184, 175)","rgb(244, 204, 204)","rgb(252, 229, 205)","rgb(255, 242, 204)","rgb(217, 234, 211)","rgb(208, 224, 227)","rgb(201, 218, 248)","rgb(207, 226, 243)","rgb(217, 210, 233)","rgb(234, 209, 220)","rgb(221, 126, 107)","rgb(234, 153, 153)","rgb(249, 203, 156)","rgb(255, 229, 153)","rgb(182, 215, 168)","rgb(162, 196, 201)","rgb(164, 194, 244)","rgb(159, 197, 232)","rgb(180, 167, 214)","rgb(213, 166, 189)","rgb(204, 65, 37)","rgb(224, 102, 102)","rgb(246, 178, 107)","rgb(255, 217, 102)","rgb(147, 196, 125)","rgb(118, 165, 175)","rgb(109, 158, 235)","rgb(111, 168, 220)","rgb(142, 124, 195)","rgb(194, 123, 160)","rgb(166, 28, 0)","rgb(204, 0, 0)","rgb(230, 145, 56)","rgb(241, 194, 50)","rgb(106, 168, 79)","rgb(69, 129, 142)","rgb(60, 120, 216)","rgb(61, 133, 198)","rgb(103, 78, 167)","rgb(166, 77, 121)","rgb(91, 15, 0)","rgb(102, 0, 0)","rgb(120, 63, 4)","rgb(127, 96, 0)","rgb(39, 78, 19)","rgb(12, 52, 61)","rgb(28, 69, 135)","rgb(7, 55, 99)","rgb(32, 18, 77)","rgb(76, 17, 48)"]];var O=[];var H={};var k={};var j=[];var C=0;var g=0;var E;var M={type:"#onappeartype",easing:"#onappeareasing",speed:"#onappearspeed"};var K={type:"#ondisappeartype",easing:"#ondisappeareasing",speed:"#ondisappearspeed"};var x={newlayer:"#newlayer",newtext:"#newtextstate",newhtml:"#newhtmlstate",newimage:"#newimagestate",previewlayer:"#previewlayer",deletelayer:"#deletelayer"};var L={layer:0,state:0,style:0};var a={layer:-1,state:-1};var P=[];var d;var A={};var b="";var i=40;var h={};h.ispreview=false;h.counter=0;z(x.previewlayer).click(function(){if(a.layer==-1){return}var X=z(this).text();if(X.indexOf("Preview Layer")!=-1){z(this).html('<span class="glyphicon glyphicon-stop"></span> Exit Preview</button>');z(this).removeClass("btn-success").addClass("btn-warning");z("#maindiv").hide();z(x.newlayer).attr("disabled","disabled");z(x.deletelayer).attr("disabled","disabled");h.ispreview=true;var U={};U.id=a.layer;h.arrstates=r(a.layer);if(a.state==-1){if(h.arrstates.length>0){B(a.layer,h.arrstates[0].stateid,true)}}else{B(a.layer,a.state,true)}U.top=d.position().top;U.left=d.position().left;U.width=0;U.height=0;h.layer=U;for(var T=0;T<H.layers.items.length;T++){var U=H.layers.items[T];if(U==undefined){continue}var R=z('.layer[data-id="'+U.id+'"]');if(R.length){R.hide()}}c()}else{z(this).html('<span class="glyphicon glyphicon-play"></span> Preview Layer</button>');z(this).removeClass("btn-warning").addClass("btn-success");z("#maindiv").show();z(x.deletelayer).removeAttr("disabled");z(x.newlayer).removeAttr("disabled");h.ispreview=false;for(var S=0;S<O.length;S++){var W=O[S];W.domitem.dequeue();W.domitem.css({"transition-timing-function":"","transition-delay":"","transition-duration":"","transition-property":""})}var V=document.getElementById("w3_previewlayer");V.innerHTML="";O.splice(0,O.length);z("#w3_previewlayer").remove();for(var T=0;T<H.layers.items.length;T++){var U=H.layers.items[T];if(U==undefined){continue}var R=z('.layer[data-id="'+U.id+'"]');if(R.length){R.show()}}}});function n(R){if(R=="layer"){if(a.layer==-1){z(x.newtext).attr("disabled","disabled");z(x.previewlayer).attr("disabled","disabled");z(x.deletelayer).attr("disabled","disabled")}else{z(x.newtext).removeAttr("disabled");var S=r(a.layer);if(S.length==0){z(x.previewlayer).attr("disabled","disabled")}else{z(x.previewlayer).removeAttr("disabled")}z(x.deletelayer).removeAttr("disabled")}}if(R=="state"){if(a.state==-1){z("#statesettings").tabs().hide()}else{z("#statesettings").tabs().show()}}}function r(U){var S=[];for(var R=0;R<H.states.items.length;R++){if(!u(H.states.items[R])){continue}var T=H.states.items[R];if(T.layerid!=U){continue}S.push(T)}return S}function y(R){return(!R||!/\S/.test(R))}z("#changestyle").click(function(){B(a.layer,a.state,false);z("#showdialog").dialog("open")});z("#updatestyle").click(function(){var W=z("#usestyles").val();if(W=="none"){return}var T;for(var S=0;S<k.items.length;S++){T=k.items[S];if(T==undefined){continue}if(T.id==W){T.fontsize=z("#slider-font-size").slider("value");T.fontcolor=z("#font-color-value").val();T.fontfamily=z("#font-family").val();if(z("#ifbackground").prop("checked")){T.ifbackground=true;T.backcolor=z("#back-color-value").val();T.radiussize=z("#slider-radius-size").slider("value");T.padding=z("#slider-padding-size").slider("value")}else{T.ifbackground=false}break}}var R=z(this);R.addClass("disabled").css("position","relative").append('<div class="showajax"></div>');var V={};V.action="ibeffects_ajax_request";V.type="savestyle";V.nonce=W3ExIBA.nonce;var U={};U.styles=k;V.data=U;jQuery.ajax({type:"post",dataType:"json",url:W3ExIBA.ajaxurl,data:V,complete:function(X){R.removeClass("disabled").css("position","static");R.find(".showajax").remove()}})});z("#renamestyle").click(function(){var X=z("#usestyles").val();var W=z("#renamestylename").val();if(y(W)){return}if(X=="none"){return}var T;for(var S=0;S<k.items.length;S++){T=k.items[S];if(T==undefined){continue}if(T.id==X){T.name=W;break}}var R=z(this);R.addClass("disabled").css("position","relative").append('<div class="showajax"></div>');var V={};V.action="ibeffects_ajax_request";V.type="savestyle";V.nonce=W3ExIBA.nonce;var U={};U.styles=k;V.data=U;jQuery.ajax({type:"post",dataType:"json",url:W3ExIBA.ajaxurl,data:V,complete:function(Y){R.removeClass("disabled").css("position","static");R.find(".showajax").remove();z("#usestyles option:selected").text(W);z("#renamestylename").val("")}})});z("#deletestyle").click(function(){var W=z("#usestyles").val();if(W=="none"){return}var T;for(var S=0;S<k.items.length;S++){T=k.items[S];if(T==undefined){continue}if(T.id==W){delete k.items[S];break}}var R=z(this);R.addClass("disabled").css("position","relative").append('<div class="showajax"></div>');var V={};V.action="ibeffects_ajax_request";V.type="savestyle";V.nonce=W3ExIBA.nonce;var U={};U.styles=k;V.data=U;jQuery.ajax({type:"post",dataType:"json",url:W3ExIBA.ajaxurl,data:V,complete:function(X){R.removeClass("disabled").css("position","static");R.find(".showajax").remove();z("#usestyles option:selected").remove()}})});z("#newstyle").click(function(){var V=z("#newstylename").val();if(y(V)){V="untitled"}var S=z(this);S.addClass("disabled").css("position","relative").append('<div class="showajax"></div>');var R={};R.name=V;R.id=L.style;R.fontsize=z("#slider-font-size").slider("value");R.fontcolor=z("#font-color-value").val();R.fontfamily=z("#font-family").val();if(z("#ifbackground").prop("checked")){R.ifbackground=true;R.backcolor=z("#back-color-value").val();R.radiussize=z("#slider-radius-size").slider("value");R.padding=z("#slider-padding-size").slider("value")}else{R.ifbackground=false}L.style++;k.items.push(R);var U={};U.action="ibeffects_ajax_request";U.type="savestyle";U.nonce=W3ExIBA.nonce;var T={};T.styles=k;U.data=T;jQuery.ajax({type:"post",dataType:"json",url:W3ExIBA.ajaxurl,data:U,complete:function(W){S.removeClass("disabled").css("position","static");S.find(".showajax").remove();z("#usestyles").append("<option value='"+R.id+"'>"+R.name+"</option>");z("#usestyles").val(R.id);z("#updatestyle, #renamestyle, #deletestyle").removeAttr("disabled");z("#newstylename").val("")}})});z("#ifbackground").click(function(R){if(z("#ifbackground").prop("checked")){z("#divifbackground").css("visibility","visible");z("#fontexample").css("background",z("#back-color-value").val());z("#fontexample").css("border-radius",z("#slider-radius-size").slider("value"))}else{z("#divifbackground").css("visibility","hidden");z("#fontexample").css("background","");z("#fontexample").css("border-radius","")}});z("#usestyles").change(function(){var U=z(this).val();var T=z("#fontexample");if(U=="none"){z("#updatestyle, #renamestyle, #deletestyle").attr("disabled","disabled");z("#ifbackground").prop("checked",false);z("#divifbackground").css("visibility","hidden");T.css("background","");z("#slider-font-size").slider("value",15);z("#font-size").val("15px");z("#slider-padding-size").slider("value",0);z("#padding-size").val("0px");T.css("padding","0px");z("#font-color").spectrum("set","#000000");z("#font-color-value").val("#000000");T.css("color","#000000");T.css("font-size","15px");return}z("#updatestyle, #renamestyle, #deletestyle").removeAttr("disabled");var S;for(var R=0;R<k.items.length;R++){S=k.items[R];if(S==undefined){continue}if(S.id==undefined){continue}if(S.id==U){z("#slider-font-size").slider("value",S.fontsize);z("#font-size").val(S.fontsize+"px");z("#font-family").val(S.fontfamily);T.css("font-family",S.fontfamily);z("#font-color").spectrum("set",S.fontcolor);z("#font-color-value").val(S.fontcolor);T.css("color",S.fontcolor);T.css("font-size",S.fontsize+"px");if(S.ifbackground){z("#ifbackground").prop("checked",true);z("#divifbackground").css("visibility","visible");z("#back-color").spectrum("set",S.backcolor);z("#back-color-value").val(S.backcolor);z("#slider-radius-size").slider("value",S.radiussize);z("#radius-size").val(S.radiussize+"px");z("#slider-padding-size").slider("value",S.padding);z("#padding-size").val(S.padding+"px");T.css("padding",S.padding+"px");T.css("border-radius",S.radiussize+"px");T.css("background",S.backcolor)}else{z("#ifbackground").prop("checked",false);z("#divifbackground").css("visibility","hidden");T.css("background","");T.css("padding","0px")}break}}});function F(){var T;var R=z("#usestyles");for(var S=0;S<k.items.length;S++){T=k.items[S];if(T==undefined){continue}if(T.id==undefined){continue}R.append("<option value='"+T.id+"'>"+T.name+"</option>");if(T.id>=L.style){L.style=T.id;L.style++}}z("#updatestyle, #renamestyle, #deletestyle").attr("disabled","disabled")}function p(){var Z=o(a.layer);z("#statescontainer").empty();if(Z==undefined){return}for(var W=0;W<Z.length;W++){var R=Z[W];if(R==undefined){continue}if(R.stateid>=L.state){L.state=R.stateid;L.state++}for(var V=0;V<Z.length;V++){var Y=Z[V];if(Y.sortid==W){var X="Text State";var S='<li data-id="'+Y.stateid+'" class="ui-state-highlight layerstate">'+X+'<button class="btn btn-danger btn-sm" type="button" title="Delete State"><span class="glyphicon glyphicon-trash"></span></button></li>';z("#statescontainer").append(S);break}}}var T=j[a.layer];if(T==undefined){return}if(T.selstate==-1){return}var U='<div class="selstatediv"></div>';z("li.layerstate").removeClass("selstate").find(z("div")).remove();z("li.layerstate[data-id="+T.selstate+"]").addClass("selstate").append(U);a.state=T.selstate;q(a.layer,a.state);n("state")}z(document).on("click","div.imagelayer",function(){var S=z(this).attr("data-id");if(a.layer==S||h.ispreview){return}B(a.layer,a.state,true);var R=j[a.layer];if(R==undefined){R={};j[a.layer]=R}R.selstate=a.state;a.state=-1;L.state=0;z(".layer").removeClass("selected");z(this).addClass("selected");a.layer=S;d=z(this);n("layer");n("state");p()});function B(V,U,R){if(V==-1||U==-1){return}R=typeof R!=="undefined"?R:false;var T=o(V,U);if(a.state!=-1){T.text=z("#statecontent").val();T.displayfor=z("#displaystate").val();T.delayfor=z("#delaystate").val();T.afterfin=z("#laststatefin option:selected").val();T.onappear=z("#onappeartype option:selected").val();T.onappeareasing=z("#onappeareasing option:selected").val();T.onappearspeed=z("#onappearspeed").val();T.ondisappear=z("#ondisappeartype").val();T.ondisappeareasing=z("#ondisappeareasing option:selected").val();T.ondisappearspeed=z("#ondisappearspeed").val();T.staticeffect=z("#laststateeffect option:selected").val()}if(R){var S=o(V);z("li.layerstate").each(function(W){var Z=z(this).attr("data-id");for(var X=0;X<S.length;X++){var Y=S[X];if(Y.stateid!=Z){continue}Y.sortid=W;break}})}}function o(Y,W,X,V){X=typeof X!=="undefined"?X:false;V=typeof V!=="undefined"?V:false;W=typeof W!=="undefined"?W:-1;var T=[];if(H.states==undefined){H.states={};H.states.items=[]}for(var U=0;U<H.states.items.length;U++){if(H.states.items[U]==undefined){continue}if(H.states.items[U].layerid!=Y){continue}if(V){delete H.states.items[U];continue}if(W==-1){T.push(H.states.items[U]);continue}if(H.states.items[U].stateid!=W){continue}if(X){delete H.states.items[U];return}return H.states.items[U]}if(V){for(var S=0;S<H.layers.items.length;S++){if(H.layers.items[S]==undefined){continue}if(H.layers.items[S].id!=Y){continue}delete H.layers.items[S];break}return}if(W==-1){return T}var R={};R.layerid=Y;R.stateid=W;R.type="text";R.text="";H.states.items.push(R);return R}function s(S,U,R,V){var T;T=S.toHexString();z("#fontexample").css("background",T);z("#back-color-value").val(T)}function Q(R){var S;S=R.toHexString();z("#fontexample").css("color",S);z("#font-color-value").val(S)}function D(){if(z("#newtextstate").length){a.layer=-1;z("#statescontainer").sortable({cursor:"move",start:function(T,U){B(a.layer,a.state);var S='<div class="selstatediv"></div>';z("li.layerstate").removeClass("selstate").find(z("div")).remove();U.item.addClass("selstate").append(S);var V=U.item.attr("data-id");a.state=V;q(a.layer,a.state);n("state")}}).disableSelection();z("#statesettings").tabs();z("#statesettings").tabs().hide();n("layer");k.items=[];w();if(H.layers==undefined){H.layers={};H.layers.items=[];H.states={};H.states.items=[]}F();var R=z("#fontexample");z("#slider-font-size").slider({range:"min",value:15,min:8,max:82,slide:function(S,T){z("#font-size").val(T.value+"px");R.css("font-size",T.value+"px")}});z("#slider-radius-size").slider({range:"min",value:10,min:0,max:50,slide:function(S,T){z("#radius-size").val(T.value+"px");R.css("border-radius",T.value+"px")}});z("#slider-padding-size").slider({range:"min",value:0,min:0,max:20,slide:function(S,T){z("#padding-size").val(T.value+"px");R.css("padding",T.value+"px")}});z("#radius-size").val(z("#slider-radius-size").slider("value")+"px");z("#padding-size").val(z("#slider-padding-size").slider("value")+"px");R.css("border-radius",z("#slider-radius-size").slider("value")+"px");z("#font-color-value").val("#000000");z("#back-color-value").val("#ffffff");z("#showdialog").dialog({autoOpen:false,height:640,width:780,modal:true,draggable:false,resizable:false,closeOnEscape:false,open:function(T,W){var X=z(".ui-dialog:visible");z(X).css("z-index",300002);z(".ui-widget-overlay").each(function(){z(this).next(".ui-dialog").andSelf().wrapAll('<div class="w3exvtfscope w3exvtfdel" />')});z("span.ui-icon-closethick").css({left:"0px",top:"0px"});var Y=z("#fontexample");z("#font-size").val(z("#slider-font-size").slider("value")+"px");Y.css("font-size",z("#slider-font-size").slider("value")+"px");var S="#000000";var V="#ffffff";z("#back-color").spectrum({color:V,className:"full-spectrum",appendTo:"#showdialog",showPalette:true,showInput:true,showSelectionPalette:true,maxPaletteSize:10,preferredFormat:"hex",change:s,palette:N});z("#font-color").spectrum({color:S,className:"full-spectrum",appendTo:"#showdialog",showPalette:true,showInput:true,showSelectionPalette:true,maxPaletteSize:10,preferredFormat:"hex",change:Q,palette:N});var U=o(a.layer,a.state);A={};if(u(U)&&u(U.style)){A.fontsize=U.style.fontsize;A.fontcolor=U.style.fontcolor;A.fontfamily=U.style.fontfamily;A.ifbackground=U.style.ifbackground;if(U.style.ifbackground){A.backcolor=U.style.backcolor;A.radiussize=U.style.radiussize;A.padding=U.style.padding}z("#font-size").val(A.fontsize+"px");z("#font-family").val(A.fontfamily);Y.css("font-size",A.fontsize+"px");z("#slider-font-size").slider("value",A.fontsize);z("#font-color").spectrum("set",A.fontcolor);z("#font-color-value").val(A.fontcolor);Y.css("color",A.fontcolor);Y.css("font-family",A.fontfamily);if(A.ifbackground){z("#divifbackground").css("visibility","visible");z("#ifbackground").prop("checked",true);Y.css("background",A.backcolor);z("#back-color").spectrum("set",A.backcolor);z("#slider-radius-size").slider("value",A.radiussize);z("#back-color-value").val(A.backcolor);z("#radius-size").val(A.radiussize+"px");z("#slider-padding-size").slider("value",A.padding);z("#padding-size").val(A.padding+"px");Y.css("border-radius",A.radiussize+"px");Y.css("padding",A.padding+"px")}else{Y.css("background","");z("#back-color").spectrum("set","#ffffff");z("#slider-radius-size").slider("value",0);z("#slider-padding-size").slider("value",0);z("#padding-size").val("0px");z("#back-color-value").val(V);z("#radius-size").val("0px");Y.css("border-radius","0px");Y.css("padding","0px");z("#ifbackground").prop("checked",false);z("#divifbackground").css("visibility","hidden")}}else{z("#font-size").val("15px");Y.css("font-size","15px");z("#slider-font-size").slider("value",15);z("#font-color-value").val(S);Y.css("color",S);Y.css("font-family","");Y.css("background","");Y.css("padding","0px");z("#back-color-value").val(V);z("#slider-radius-size").slider("value",0);z("#radius-size").val("0px");Y.css("border-radius","0px");z("#ifbackground").prop("checked",false);z("#divifbackground").css("visibility","hidden")}},close:function(S,T){z("#font-color").spectrum("destroy");z("#back-color").spectrum("destroy");z("#updatestyle, #renamestyle, #deletestyle").attr("disabled","disabled");z("#usestyles").val("none")},buttons:{OK:function(){var S=o(a.layer,a.state);if(u(S)){if(!u(S.style)){S.style={}}S.style.fontsize=z("#slider-font-size").slider("value");S.style.fontcolor=z("#font-color-value").val();S.style.fontfamily=z("#font-family").val();S.style.ifbackground=z("#ifbackground").prop("checked");if(S.style.ifbackground){S.style.backcolor=z("#back-color-value").val();S.style.radiussize=z("#slider-radius-size").slider("value");S.style.padding=z("#slider-padding-size").slider("value")}q(a.layer,a.state)}z(this).dialog("close")},Cancel:function(){z(this).dialog("close")}}})}}z("#deletelayer").click(function(){if(a.layer==-1){return}o(a.layer,0,false,true);z('#w3_ibacontainer0 > div[data-id="'+a.layer+'"]').remove();a.layer=-1;a.state=-1;z("#statescontainer").empty();n("layer");n("state")});function w(){if(W3Ex.imagearrlayers!=undefined){H=W3Ex.imagearrlayers;if(H.layers!=undefined){for(var U=0;U<H.layers.items.length;U++){var T=H.layers.items[U];if(T.id==undefined){H.layers.items.splice(U,1);U--;continue}var X=T.id;if(L.layer<=X){L.layer=X;L.layer++}var R='<div data-id="'+X+'" class="defaultlayer layer imagelayer defaultstyle"> Layer<br/></div>';z("#w3_ibacontainer0").append(R);var W=z("#w3_ibacontainer0 > div:last");W.draggable({containment:"parent",start:function(){var Z=z(this).attr("data-id");if(a.layer==Z||h.ispreview){return}B(a.layer,a.state,true);var Y=j[a.layer];if(Y==undefined){Y={};j[a.layer]=Y}Y.selstate=a.state;a.state=-1;L.state=0;z(".layer").removeClass("selected");z(this).addClass("selected");a.layer=Z;d=z(this);n("layer");n("state");p()}});W.css("top",parseInt(T.top));W.css("left",parseInt(T.left))}}}if(W3Ex.arrstyles!=undefined&&W3Ex.arrstyles.items!=undefined){for(var S=0;S<W3Ex.arrstyles.items.length;S++){var V=W3Ex.arrstyles.items[S];if(V==undefined){W3Ex.arrstyles.items.splice(S,1);S--;continue}if(V.id==undefined){W3Ex.arrstyles.items.splice(S,1);S--;continue}}k=W3Ex.arrstyles}}z("#savechanges").click(function(){if(H.layers.items.length==0){return}B(a.layer,a.state,true);for(var V=0;V<H.layers.items.length;V++){var U=H.layers.items[V];if(U==undefined){continue}var R=z('.layer[data-id="'+U.id+'"]');if(R.length){U.top=R.position().top;U.left=R.position().left}}var S=z(this);S.addClass("disabled").css("position","relative").append('<div class="showajax"></div>');var Y={};Y.action="ibeffects_ajax_request";Y.type="savechanges";Y.nonce=W3ExIBA.nonce;var X={};X.id=W3Ex.imageid;X.layers=H;if(u(H.states.items)&&u(H.layers.items)){X.layercount=0;X.statecount=0;for(var V=0;V<H.states.items.length;V++){if(!u(H.states.items[V])){continue}if(!u(H.states.items[V].layerid)){continue}var W=H.states.items[V];if(W.type=="html"){W.html=W.html.replace(/\\"/g,'"')}X.statecount++}for(var T=0;T<H.layers.items.length;T++){if(!u(H.layers.items[T])){continue}X.layercount++}}Y.data=X;jQuery.ajax({type:"post",dataType:"json",url:W3ExIBA.ajaxurl,data:Y,complete:function(Z){S.removeClass("disabled").css("position","static");S.find(".showajax").remove()}})});z("#newlayer").click(function(){B(a.layer,a.state,true);if(a.layer!=-1){var S=j[a.layer];if(S==undefined){S={};j[a.layer]=S}S.selstate=a.state}a.state=-1;L.state=0;var U=L.layer;L.layer++;var R='<div data-id="'+U+'" class="defaultlayer layer imagelayer defaultstyle">Empty Layer<br/><div style="font-size:12px;">/todo: add states/</div></div>';var T={};T.id=U;H.layers.items.push(T);z("#w3_ibacontainer0").append(R);z("#w3_ibacontainer0 > div:last").draggable({containment:"parent",start:function(){var W=z(this).attr("data-id");if(a.layer==W||h.ispreview){return}B(a.layer,a.state,true);var V=j[a.layer];if(V==undefined){V={};j[a.layer]=V}V.selstate=a.state;a.state=-1;L.state=0;z(".layer").removeClass("selected");z(this).addClass("selected");a.layer=W;d=z(this);n("layer");n("state");p()}})});function q(U,T){if(U==-1||T==-1){return}var S=o(U,T);z("#changestyle").removeAttr("disabled");z("#contenttype").text("Text");z("#statecontentdiv").removeClass("ui-nobackground ui-widget ui-state-default ui-corner-all");z("#statecontentdiv").hide();z("#editcontent").hide();z("#statecontent").show();z("#statecontent").val(S.text.replace(new RegExp("<br />","g"),"\n"));S.text=S.text.replace(new RegExp("\n","g"),"<br />");d.html(S.text);d.removeClass("defaultstyle");if(u(S.style)){var R=S.style;d.css({"font-size":R.fontsize+"px",color:R.fontcolor,"font-family":R.fontfamily});if(R.ifbackground==="true"){R.ifbackground=true}if(R.ifbackground==="false"){R.ifbackground=false}if(R.ifbackground){d.css({background:R.backcolor,"border-radius":R.radiussize+"px",padding:R.padding+"px"})}else{d.css({background:"","border-radius":"",padding:"0px"})}}else{d.css({"font-size":"15px",color:"#000000",background:"","border-radius":"",padding:"0px"})}if(u(S.displayfor)){z("#displaystate").val(S.displayfor)}else{z("#displaystate").val(4000)}if(u(S.delayfor)){z("#delaystate").val(S.delayfor)}else{z("#delaystate").val(0)}if(u(S.afterfin)){z("#laststatefin").val(S.afterfin)}else{z("#laststatefin").val("loop")}if(u(S.onappear)){z("#onappeartype").val(S.onappear)}else{z("#onappeartype").val("fadein")}if(u(S.onappeareasing)){z("#onappeareasing").val(S.onappeareasing)}else{z("#onappeareasing").val("ease")}if(u(S.onappearspeed)){z("#onappearspeed").val(S.onappearspeed)}else{z("#onappearspeed").val(500)}if(u(S.ondisappear)){z("#ondisappeartype").val(S.ondisappear)}else{z("#ondisappeartype").val("fadeout")}if(u(S.ondisappeareasing)){z("#ondisappeareasing").val(S.ondisappeareasing)}else{z("#ondisappeareasing").val("ease")}if(u(S.ondisappearspeed)){z("#ondisappearspeed").val(S.ondisappearspeed)}else{z("#ondisappearspeed").val(500)}}function e(R){d.html("");if(R=="text"){z("#contenttype").text("Text");z("#statecontentdiv").removeClass("ui-nobackground ui-widget ui-state-default ui-corner-all");z("#statecontentdiv").hide();z("#editcontent").hide();z("#statecontent").show();z("#statecontent").val("");z("#changestyle").removeAttr("disabled")}d.removeClass("defaultstyle");d.css({"font-size":"15px",color:"#000000",background:"","border-radius":"",padding:"0px"});z("#displaystate").val(4000);z("#delaystate").val(0);z("#laststatefin").val("loop");z("#onappeartype").val("fadein");z("#onappeareasing").val("ease");z("#onappearspeed").val(500);z("#ondisappeartype").val("fadeout");z("#ondisappeareasing").val("ease");z("#ondisappearspeed").val(500)}z(document).on("click","li.layerstate > button",function(S){var R=z(this).parent().attr("data-id");o(a.layer,R,true);if(R==a.state){a.state=-1;e("text");n("state")}z(this).parent().remove();n("layer");S.stopPropagation()});z(document).on("click","li.layerstate",function(){B(a.layer,a.state);var S=z(this).attr("data-id");var R='<div class="selstatediv"></div>';z("li.layerstate").removeClass("selstate").find(z("div")).remove();z(this).addClass("selstate").append(R);a.state=S;q(a.layer,a.state);n("state")});z("#statecontent").keyup(function(){var R=z(this).val();R=R.replace(new RegExp("\n","g"),"<br />");d.html(R)});(function(){z("#newtextstate").click(function(){B(a.layer,a.state);var U=L.state;L.state++;var S='<div class="selstatediv"></div>';var R='<li data-id="'+U+'" class="ui-state-highlight layerstate" >Text State<button class="btn btn-danger btn-sm deletestate" type="button" title="Delete State"><span class="glyphicon glyphicon-trash"></span></button></li>';z("li.layerstate").removeClass("selstate").find(z("div")).remove();z("#statescontainer").append(R);z("#statescontainer > li:last").addClass("selstate").append(S);a.state=U;n("state");var T=o(a.layer,U);n("layer");T.type="text";e("text")});D()})();z(document).on("click","input:radio",function(){var S=z(this).attr("id");if(P[S]!=undefined){var R='Url: <a href="'+P[S]+'" target="_blank">'+P[S]+"</a>";z("#imageurl").html(R);z("#imagesaveok").removeAttr("disabled")}});z(document).on("click",".deletelayer",function(){var U=z(this).attr("data-id");var S=z(this);var R={};R.action="ibeffects_ajax_request";R.type="deleteimage";R.nonce=W3ExIBA.nonce;var T={};T.id=U;R.data=T;jQuery.ajax({type:"post",dataType:"json",url:W3ExIBA.ajaxurl,data:R,success:function(V){S.parents("tr:first").remove()},error:function(V){}})});var t;z("#newimage").click(function(R){R.preventDefault();if(t){t.open();return}t=wp.media.frames.file_frame=wp.media({title:"Choose Image",library:{type:"image"},button:{text:"Choose Image"},multiple:false,displaySettings:true,displayUserSettings:true});t.on("select",function(){var X=t.state().get("selection").first().toJSON();var V=X.sizes;var U="Select image size to continue<br /><br />";var S=0;P.length=0;var W="";for(key in V){var T=X.sizes[key];if(T==E){continue}if(key=="thumbnail"){W=T.url}U+='<input type="radio" id="'+S+'" name="radioi"><label for="'+S+'"> ';U+=(key.charAt(0).toUpperCase()+key.slice(1))+" - ( width: "+T.width+" ) ( height: "+T.height+" )</label> <br/>";P[S]=T.url;if(W==""){W=T.url}S++}if(W!=""){z("#imagedivback").css("background-image","url("+W+")")}U+='<div id="imageurl"></div>';z("#imagesizes").html(U);z("#newimagediv").css("visibility","visible").hide().fadeIn("slow",function(){z("html, body").animate({scrollTop:z(document).height()},"slow")});z("#imagesaveok").unbind("click");z("#imagesaveok").click(function(){var Y={};Y.action="ibeffects_ajax_request";Y.type="newimage";Y.nonce=W3ExIBA.nonce;var Z={};var aa=z("input[name=radioi]:checked").attr("id");if(P[aa]!=undefined){Z.img=P[aa]}Z.thumb=W;Y.data=Z;jQuery.ajax({type:"post",dataType:"json",url:W3ExIBA.ajaxurl,data:Y,success:function(ab){var ac="<tr><td >"+ab.id.id+"</td><td >"+ab.id.shortcode+'</td><td ><div style="text-align:left;">'+ab.id.infoto+'</div></td><td style="padding-top:2px;padding-bottom:6px;"><div class="centerblock"><div class="imagebuttons"><a class="btn btn-success btn-sm editlayer" href="admin.php?page=ibeffects&edit='+ab.id.id+'"><span class="glyphicon glyphicon-pencil"></span>Edit</a><br/><br /><br /><button data-id="'+ab.id.id+'" class="btn btn-danger btn-sm deletelayer"><span class="glyphicon glyphicon-trash"></span>Delete</button>	</div><div class="shownimages""><img src="'+W+'"></img></div><div style="clear:both;"> </div></div></td></tr>';z("#showimages > tbody:last").append(ac);z("#newimage").removeAttr("disabled");z("#newimagediv").fadeOut()},error:function(ab){z("#newimage").removeAttr("disabled");z("#newimagediv").fadeOut()}})});z("#imagesaveok").attr("disabled","disabled");z("#imagesavecancel").click(function(){z("#newimage").removeAttr("disabled");z("#newimagediv").fadeOut()});z("#newimage").attr("disabled","disabled")});t.open()});function u(R){return R!==E}function f(T){var R=m(T);var S={visibility:"hidden"};R.domitem.css(S);O.push(R)}function I(X){var V={};var T=X.domitem;V.duration=X.onappspeed;V.complete=G;var W=false;var U=X.width;var S=Math.round(U/2);var R=X.height;var Y=Math.round(R/2);if(X.state.start&&!X.state.finish){V.easing=X.onappeasing;T.css({top:X.top+"px",left:X.left+"px",visibility:"visible",opacity:0,transition:"",transform:""});switch(X.onappear){case"fadein":V.opacity=0.9999;break;case"top":T.css({top:(X.top-i)+"px"});V.y=i+"px";V.opacity=0.9999;break;case"left":T.css({left:(X.left-i)+"px"});V.x=i+"px";V.opacity=0.9999;break;case"right":T.css({left:(X.left+i)+"px"});V.x="-"+i+"px";V.opacity=0.9999;break;case"bottom":T.css({top:(X.top+i)+"px"});V.y="-"+i+"px";V.opacity=0.9999;break;default:break}}else{if(X.state.finish){V.duration=X.ondisspeed;V.easing=X.ondiseasing;switch(X.ondis){case"fadeout":V.opacity=0;break;case"top":V.y="-"+i+"px";V.opacity=0;break;case"left":V.x="-"+i+"px";V.opacity=0;break;case"right":V.x=i+"px";V.opacity=0;break;case"bottom":V.y=i+"px";V.opacity=0;case"none":V.duration=10;V.opacity=0;break;default:break}}}if(X.state.firstshow){X.state.firstshow=false;X.state.start=true;X.state.finish=false;V.delay=X.delayfor;T.transition(V)}else{if(X.state.finish){V.delay=X.displayfor;T.transition(V)}else{V.delay=0;T.transition(V)}}}function G(V){var V=typeof V!=="undefined"?V:-1;if(!h.ispreview){return}var W;if(V!=-1){W=V}else{W=z(this).attr("id")}for(var T=0;T<O.length;T++){var S=O[T];if(S.domid==W){if(V!=-1){I(S);return}if(S.state.start){S.state.start=false;S.state.finish=true;if(J(S)){if(S.afterfin=="stop"){return}}I(S)}else{if(S.state.finish){var R=S.domitem;R.css({top:S.top+"px",left:S.left+"px",transform:"",transition:"",opacity:0,visibility:"hidden"});var U;var X=v(S);U=X.anim;S.state.start=false;S.state.finish=false;S.state.curritem=false;U.state.start=true;U.state.curritem=true;U.state.finish=false;I(U)}}break}}}function m(S){var U={};var R=z("#w3_effect"+S.stateid+"-"+h.counter);U.domitem=R;var V={start:false,finish:false,curritem:false,isfirst:false,islast:false,firstshow:false};U.state=V;U.domid=R.attr("id");U.width=parseInt(R.outerWidth(),10);U.height=R.outerHeight();U.sortid=parseInt(S.sortid,10);U.layerid=0;U.layerdom=h.layer.domitem;U.delayfor=parseInt(S.delayfor,10);U.displayfor=parseInt(S.displayfor,10);U.afterfin=S.afterfin;U.onappear=S.onappear;U.onappeasing=S.onappeareasing;U.onappspeed=parseInt(S.onappearspeed,10);U.ondis=S.ondisappear;U.ondiseasing=S.ondisappeareasing;U.ondisspeed=parseInt(S.ondisappearspeed,10);U.staticeffect=S.staticeffect;var T=h.layer;if(T.width<U.width){T.width=U.width}if(T.height<U.height){T.height=U.height}R.css({position:"absolute",display:"inline",width:U.width+"px",height:U.height+"px"});return U}function l(){var T=h.layer;var V=z("#mainimage");if(V.width()>V.height()){i=parseInt(V.width()*0.14,10)}else{i=parseInt(V.height()*0.14,10)}var U=h.arrstates;for(var S=0;S<U.length;S++){var X=U[S];f(X)}T.domitem.removeClass("w3_ibainnerhold");T.domitem.css({position:"absolute",top:T.top,left:T.left,width:T.width,height:T.height});for(var R=0;R<O.length;R++){var W=O[R];if(W.height<T.height){W.domitem.css("top",Math.round((T.height-W.height)/2)+"px")}if(W.width<T.width){W.domitem.css("left",Math.round((T.width-W.width)/2)+"px")}W.left=W.domitem.position().left;W.top=W.domitem.position().top}for(var S=0;S<O.length;S++){var W=O[S];if(W.sortid==0){W.state.start=true;W.state.finish=false;W.state.curritem=true;W.state.isfirst=true;W.state.firstshow=true;W.state.islast=J(W);I(W);break}}}function c(){var U=0;var X=0;O.length=0;h.counter++;z('<div id="w3_previewlayer" class="w3_ibainnerhold"></div>').appendTo(z("#w3_ibacontainer0"));h.layer.domitem=z("#w3_previewlayer");var V=h.arrstates;for(var S=0;S<V.length;S++){var W=V[S];z('<div style="position: absolute;left:0px;top:0px;display:inline;" data-id="'+W.stateid+'" id="w3_effect'+W.stateid+"-"+h.counter+'" class="w3_effect"></div>').appendTo(h.layer.domitem);var R=z("#w3_effect"+W.stateid+"-"+h.counter);W.text=W.text.replace(new RegExp("\n","g"),"<br />");R.html(W.text);if(u(W.style)){var T=W.style;R.css({"font-size":T.fontsize+"px",color:T.fontcolor,"font-family":T.fontfamily});if(T.ifbackground==="true"){T.ifbackground=true}if(T.ifbackground==="false"){T.ifbackground=false}if(T.ifbackground){R.css({background:T.backcolor,"border-radius":T.radiussize+"px",padding:T.padding+"px"})}else{R.css({background:"","border-radius":"",padding:"0px"})}}else{R.css({"font-size":"15px",color:"#000000",background:"","border-radius":"",padding:"0px"})}}if(document.getElementById("w3_previewlayer")){imagesLoaded(document.getElementById("w3_previewlayer"),function(Y){l()})}else{l()}}function J(T){for(var R=0;R<O.length;R++){var S=O[R];if(S.sortid>T.sortid){return false}}return true}function v(W){var X={};X.islast=false;X.isfirst=false;X.anim=W;var S=false;for(var U=0;U<O.length;U++){var V=O[U];if((V.sortid-W.sortid)==1){X.anim=V;S=true;break}}var Y=false;for(var T=0;T<O.length;T++){var R=O[T];if(R.sortid==0){if(!S){X.anim=R;X.isfirst=true}}else{Y=true}}if(!Y){X.islast=true}return X}return{incConItems:function(){C++},finLoad:function(){g++}}})(jQuery)});